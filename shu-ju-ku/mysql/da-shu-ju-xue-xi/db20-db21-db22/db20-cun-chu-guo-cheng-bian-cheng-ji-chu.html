<!DOCTYPE html>

<html lang="zh-CN">

<head>
    
    <title>DB20_存储过程-编程基础 - 折影轻梦</title>
    <meta charset="UTF-8">
    <meta name="keywords" content="折影轻梦,Mixcm,轻惋,觅漫者,小舒同学,Xiaoshu,Nexmoe,产品,Meteor,探索者小舒,伴学OS1,Theme,Design,Product">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
    <meta name="description" content="MySQL变量MySQL变量一共分为两大类:系统变量和用户自定义变量系统变量,由系统提供，不是用户定义，属于服务器层面  会话变量，仅仅针对当前会话(连接)有效 全局变量，服务器每次启动将为所有的全局变量赋初始值，针对于所有的会话(连接)有效用户自定义变量，就是字面的意思，由用户自定义的变量 局部变量，仅仅在定义它的BEGIN END中有效 会话变量，针对于当前会话(连接)有效，与会话变量作用域相">
<meta property="og:type" content="article">
<meta property="og:title" content="DB20_存储过程-编程基础">
<meta property="og:url" content="https://nexmoe.com/shu-ju-ku/mysql/da-shu-ju-xue-xi/db20-db21-db22/db20-cun-chu-guo-cheng-bian-cheng-ji-chu.html">
<meta property="og:site_name" content="折影轻梦">
<meta property="og:description" content="MySQL变量MySQL变量一共分为两大类:系统变量和用户自定义变量系统变量,由系统提供，不是用户定义，属于服务器层面  会话变量，仅仅针对当前会话(连接)有效 全局变量，服务器每次启动将为所有的全局变量赋初始值，针对于所有的会话(连接)有效用户自定义变量，就是字面的意思，由用户自定义的变量 局部变量，仅仅在定义它的BEGIN END中有效 会话变量，针对于当前会话(连接)有效，与会话变量作用域相">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-12-30T01:00:00.000Z">
<meta property="article:modified_time" content="2024-06-01T14:12:24.878Z">
<meta property="article:author" content="折影轻梦">
<meta property="article:tag" content="大数据">
<meta name="twitter:card" content="summary">
    
<link rel="stylesheet" href="/lib/fancybox/fancybox.css">
<link rel="stylesheet" href="/lib/mdui_043tiny/mdui.css">


    <link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1717303056846">
    
    <link rel="stylesheet" href="/css/style.css?v=1717303056846">

    
        
            <link rel="stylesheet" href="/custom.css?v=1717303056846">
        
    

    
<script src="/lib/mdui_043tiny/mdui.js" async></script>
<script src="/lib/fancybox/fancybox.umd.js" async></script>


    <script async src="/js/app.js?v=1717303056846"></script>
    
     

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4D4ZJ9G024"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag("js", new Date());

  gtag("config", "G-4D4ZJ9G024");
</script>

<meta name="generator" content="Hexo 6.3.0"></head>

<body class="mdui-drawer-body-left">
    <div id="nexmoe-background">
        <div class="nexmoe-bg" 
            style="background-image: url(https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102206.jpg)"
        ></div>
        <div class="mdui-appbar mdui-shadow-0">
            <div class="mdui-toolbar">
                <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
                <div class="mdui-toolbar-spacer"></div>
                <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
                <a href="/" title="折影轻梦" class="mdui-btn mdui-btn-icon"><img src="https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102017.jpg" alt="折影轻梦"></a>
            </div>
        </div>
    </div>
    <div id="nexmoe-header">
        <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="折影轻梦">
            <img src="https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102017.jpg" alt="折影轻梦" alt="折影轻梦">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>168</div>
        <div><span>标签</span>61</div>
        <div><span>分类</span>62</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/archive.html" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/life.html" title="我的生活">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的生活
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/about.html" title="关于博主">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博主
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
        
            
            <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
        
            <form id="search_form">
                <label><input class="st-default-search-input" id="search_value" name="q" type="search" placeholder="搜索" style="
                    font-size: 15px !important;
                    height: 56px !important;
                    background-image: none;
                "></label>
            </form>
         
    </div>
</div>


	<script async src="/js/search.js?v=1717303056846"></script>



        
            
            <div class="nexmoe-widget-wrap">
	<div class="nexmoe-widget nexmoe-social">
		<a
			class="mdui-ripple"
			href="https://github.com/IsUnderAchiever/"
			target="_blank"
			mdui-tooltip="{content: 'QQ群'}"
			style="
				color: rgb(249, 174, 8);
				background-color: rgba(249, 174, 8, .1);
			"
		>
			<i
				class="nexmoefont icon-QQ"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://space.bilibili.com/477448861/"
			target="_blank"
			mdui-tooltip="{content: '哔哩哔哩'}"
			style="
				color: rgb(231, 106, 141);
				background-color: rgba(231, 106, 141, .1);
			"
		>
			<i
				class="nexmoefont icon-bilibili"
			></i> </a
		>
	</div>
</div>

        
            
            
            
            
            
            
    </aside>
    <div class="nexmoe-copyright">
        &copy; 2024 折影轻梦
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        
    </div>
</div><!-- .nexmoe-drawer -->
    </div>
    <div id="nexmoe-content">
        <div class="nexmoe-primary">
    <div class="nexmoe-post">
  <article>
    
        <div class="nexmoe-post-cover"> 
            <img src="https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102206.jpg" alt="DB20_存储过程-编程基础" loading="lazy">
            <h1>DB20_存储过程-编程基础</h1>
        </div>
    
    
    <div class="nexmoe-post-meta">
    <div class="nexmoe-rainbow">
        <a class="nexmoefont icon-calendar-fill">2022年12月30日</a>
        
            <a class="nexmoefont icon-appstore-fill -link" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
        
        
    </div>
    
    
    
    
    
</div>

    <h3 id="MySQL变量"><a href="#MySQL变量" class="headerlink" title="MySQL变量"></a>MySQL变量</h3><p>MySQL变量一共分为两大类:系统变量和用户自定义变量系统变量,由系统提供，不是用户定义，属于服务器层面</p>
<ul>
<li>会话变量，仅仅针对当前会话(连接)有效</li>
<li>全局变量，服务器每次启动将为所有的全局变量赋初始值，针对于所有的会话(连接)有效用户自定义变量，就是字面的意思，由用户自定义的变量</li>
<li>局部变量，仅仅在定义它的BEGIN END中有效</li>
<li>会话变量，针对于当前会话(连接)有效，与会话变量作用域相同</li>
</ul>
<h3 id="查看系统变量"><a href="#查看系统变量" class="headerlink" title="查看系统变量"></a>查看系统变量</h3><p>系统变量分为全局级(GLOBAL)和会话级(SESSION)，故在客户端连接到服务端后，可以分别查看全局级的系统变量和当前连接会话的会话级系统变量</p>
<h3 id="修改系统变量"><a href="#修改系统变量" class="headerlink" title="修改系统变量"></a>修改系统变量</h3><p>系统变量分为全局级(GLOBAL)和会话级(SESSION)，所以，修改系统变量，也同样分为两种情形:修改会话级系统变量、修改全局级系统变量。修改系统全局变量需要SESSION_VARIABLES_ADMIN权限，一般由DBA用户进行。<br><strong>查看会话级系统变量</strong><br>可通过下述命令，来修改会话级系统变量。其只对当前连接的客户端的当次连接会话生效，对其他客户端无效。同样地，当不显式指定为session时，将默认修改会话级系统变量<br>set session variable &#x3D;value;<br>set variable &#x3D; value;<br>set @@session.variable &#x3D; value;<br>set @@variable &#x3D; value;<br><strong>修改全局级系统变量</strong><br>可通过下述命令，来修改全局级系统变量。如前所述，全局级系统变量用于在客户端建立连接时来初始化该连接会话的会话级系统变量。所以在Client 1修改了全局级系统变量后，该客户端的当次会话级系统变量的值不会发生更新。而只有其后续的新客户端连接时，才会应用修改后的全局级系统变量来初始化新连接的会话级系统变量<br>set global variable &#x3D; value;<br>set @@global.variable &#x3D; value;</p>
<h3 id="用户自定义会话变量"><a href="#用户自定义会话变量" class="headerlink" title="用户自定义会话变量"></a>用户自定义会话变量</h3><p>会话变量即为服务器为每个客户端连接维护的变量。在客户端连接时，使用相应全局变量的当前值对客户端的回话变量进行初始化。设置会话变量不需要特殊权限，但客户端只能更改自己的会话变量。其作用域与生命周期均限于当前客户端连接。<br><strong>会话变量的赋值</strong><br>set @variable_name &#x3D; expr;<br>set @variable_name :&#x3D; expr;<br><strong>会话变量的查询</strong><br>SELECT @variable_name;<br><strong>注意</strong>：变量名不区分大小写，即大小写不敏感</p>
<h3 id="用户自定义局部变量"><a href="#用户自定义局部变量" class="headerlink" title="用户自定义局部变量"></a>用户自定义局部变量</h3><p>作用范围在BEGIN到END语句块之间。在该语句块里设置的变量，DECLARE语句专门用于定义局部变量</p>
<ul>
<li>局部变量是使用DECLARE关键字声明</li>
<li>局部变量DECLARE语句出现的位置一定是在BEGIN和END之间，BEGIN..END是在函数&#x2F;存储过程&#x2F;触发器中使<br>声明语法<br>DECLARE变量名数据类型[属性];<br>例如<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DECLARE</span> RES <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> O;<br></code></pre></td></tr></table></figure>
赋值语法<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SET</span> 变量名<span class="hljs-operator">=</span>值;<br><span class="hljs-keyword">SET</span> 变量名:<span class="hljs-operator">=</span>值;<br></code></pre></td></tr></table></figure>
例:<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> PRDCEDURE example spl(<br>    <span class="hljs-keyword">IN</span> v1 <span class="hljs-type">INT</span>,<br>    <span class="hljs-keyword">IN</span> v2 <span class="hljs-type">INT</span>,<br>    <span class="hljs-keyword">OUT</span> ret1 <span class="hljs-type">INT</span>,<br>    <span class="hljs-keyword">OUT</span> ret2INT)<br><span class="hljs-keyword">BEGIN</span><br>    <span class="hljs-keyword">DECLARE</span> res,<span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">SET</span> res <span class="hljs-operator">=</span> v1<span class="hljs-operator">+</span>V2;<br>    <span class="hljs-keyword">SELECT</span> res <span class="hljs-keyword">INTO</span> ret1;<br>    <span class="hljs-keyword">SET</span> res :<span class="hljs-operator">=</span> v1<span class="hljs-operator">*</span>v2<br>    <span class="hljs-keyword">SELECT</span> res <span class="hljs-keyword">INTO</span> ret2;<br><span class="hljs-keyword">END</span>;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="用户自定义变量详解"><a href="#用户自定义变量详解" class="headerlink" title="用户自定义变量详解"></a>用户自定义变量详解</h3><ul>
<li>可以利用SQL语句将值存储在用户自定义变量中，然后再利用另一条SQL语句来查询用户自定义变量。这样以来，可以再不同的SQL间传递值</li>
<li>用户自定义变量的声明方法形如:@variable_name，其中变量名称由字母、数字、””、”_”和”$”组成。当然，在以字符串或者标识符引用时也可以包含其他字符（例如:@’my-variable’，@”my-var”，或者@’my-var’)</li>
<li>用户自定义变量是会话级别的变量。其变量的作用域仅限于声明其的客户端链接。当这个客户端断开时，其所有的会话变量将会被释放</li>
<li>用户自定义变量是不区分大小写的</li>
<li>在使用SET设置变量时，可以使用&#x3D;或者:&#x3D;操作符进行赋值，在SELECT子句中赋值操作符只能使用:&#x3D;。因为&#x3D;操作符将会被认为是比较操作符</li>
<li>用户变量的类型仅限于整形、浮点型、二进制与非二进制串和NULL</li>
<li>如果用户自定义变量的值以结果集形式返回，系统会将其转换成字符串形式</li>
<li>如果查询一个没有初始化的变量，将会以字符串类型返回NULL。<br><strong>变量的值是在SQL发送到客户端后才计算的</strong><br>在SELECT语句中，在每一个SELECT的变量表达式被发送给客户端后，才会进行计算。这就意味着，在形如HAVING，GROUP BY和ORDER BY子句是在服务器端执行)当其中有使用在当前SELECT表达式定义的变量的情况下，该语句将不会得到如期的效果。<br>在HAVING只句中使用了在当前的SELECT列表中定义的别名c2，其使用了变量@v1。这条语句并不会得到如期的效果:@v1变量为上一次SQL语句执行的结果集中的quantity值，并非当前的。<br>查询客户表的数据，按照客户名称生序排列，每行记录生成序号<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> (<span class="hljs-variable">@rnk</span> :<span class="hljs-operator">=</span> <span class="hljs-variable">@rnk</span> <span class="hljs-operator">+</span> <span class="hljs-number">1</span>)<span class="hljs-keyword">AS</span> rnk,t1.<span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> (<span class="hljs-keyword">SELECT</span> cust_id, cust_name<br>    <span class="hljs-keyword">FROM</span> example.customersORDER <span class="hljs-keyword">BY</span> cust_name) <span class="hljs-keyword">AS</span> t1<br><span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@rnk</span> :<span class="hljs-operator">=</span> <span class="hljs-number">0</span>) <span class="hljs-keyword">AS</span> t2<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h3><p>IF语句用来进行条件判断，根据是否满足条件(可包含多个条件)，来执行不同的语句，是流程控制中最常用的判断语句。其语法的基本形式如下</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql">IF search_condition <span class="hljs-keyword">THEN</span> statement_list<br>[ELSEIF search_condition <span class="hljs-keyword">THEN</span> statement_list]J...<br>[<span class="hljs-keyword">ELSE</span> statement_list]<br><span class="hljs-keyword">END</span> IF<br></code></pre></td></tr></table></figure>
<p>其中，search_condition参数表示条件判断语句，如果返回值为TRUE，相应的SQL语句列表(statement list）被执行;如果返回值为FALSE，则ELSE子句的语句列表被执行。statement_list可以包括一个或多个语句。<br>例子</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql">IF age<span class="hljs-operator">&gt;</span><span class="hljs-number">20</span> <span class="hljs-keyword">THEN</span> <span class="hljs-keyword">SET</span> counter1<span class="hljs-operator">=</span>counter1<span class="hljs-operator">+</span><span class="hljs-number">1</span>;<br>ELSEIF age<span class="hljs-operator">=</span><span class="hljs-number">20</span> <span class="hljs-keyword">THEN</span> <span class="hljs-keyword">SET</span> counter2<span class="hljs-operator">=</span>counter2<span class="hljs-operator">+</span><span class="hljs-number">1</span>;<br><span class="hljs-keyword">ELSE</span> <span class="hljs-keyword">SET</span> counter3<span class="hljs-operator">=</span>counter3<span class="hljs-operator">+</span><span class="hljs-number">1</span>;<br><span class="hljs-keyword">END</span> IF;<br></code></pre></td></tr></table></figure>
<p>SQL代码根据age与20的大小关系来执行不同的SET语句。如果age值大于20,那么将counter1的值加1;如果age值等于20，那么将counter2的值加1;其他情况将counter3的值加1。IF语句都需要使用ENDIF来结束。</p>
<h3 id="case语句"><a href="#case语句" class="headerlink" title="case语句"></a>case语句</h3><p>CASE语句也是用来进行条件判断的，它提供了多个条件进行选择，可以实现比IF语句更复杂的条件判断。CASE语句的基本形式如下</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CASE</span> case_value<br><span class="hljs-keyword">WHEN</span> when_value <span class="hljs-keyword">THEN</span> statement_list<br>[<span class="hljs-keyword">WHEN</span> <span class="hljs-keyword">when</span> <span class="hljs-keyword">value</span> <span class="hljs-keyword">THEN</span> statement_list]...<br>[<span class="hljs-keyword">ELSE</span> statement_list]<br><span class="hljs-keyword">END</span> <span class="hljs-keyword">CASE</span><br></code></pre></td></tr></table></figure>
<p>case_value参数表示条件判断的变量，决定了哪一个WHEN子句会被执行<br>when_value参数表示变量的取值，如果某个when_value表达式与case_value变量的值相同，则执行对应的THEN关键字后的statement_list中的语句;<br>statement_list参数表示 when_value值没有与case_value相同值时的执行语句。<br>CASE语句都要使用END CASE结束</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CASE</span> age<br>    <span class="hljs-keyword">WHEN</span> <span class="hljs-number">20</span> <span class="hljs-keyword">THEN</span> <span class="hljs-keyword">SET</span> counter2<span class="hljs-operator">=</span>counter2<span class="hljs-operator">+</span><span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">ELSE</span> <span class="hljs-keyword">SET</span> counter3<span class="hljs-operator">=</span>counter3<span class="hljs-operator">+</span><span class="hljs-number">1</span>;<br><span class="hljs-keyword">END</span> <span class="hljs-keyword">CASE</span>;<br></code></pre></td></tr></table></figure>
<p>注意这种方式只能进行单值判断，无法进行类似age &gt;20的判断然后进行相关处理</p>
<h3 id="loop语句"><a href="#loop语句" class="headerlink" title="loop语句"></a>loop语句</h3><p>LOOP语句可以使某些特定的语句重复执行。与IF和CASE语句相比，LOOP只实现了一个简单的循环，并不进行条件判断。LOOP语句本身没有停止循环的语句，必须使用LEAVE语句等才能停止循环，跳出循环过程。<br>LOOP语句的基本形式如下</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql">[begin_label:]LOOP<br>    statement_list<br><span class="hljs-keyword">END</span> LOOP [end_label]<br></code></pre></td></tr></table></figure>
<p>其中,begin label参数和end_label参数分别表示循环开始和结束的标志，这两个标志必须相同，而且都可以省略;statement_list参数表示需要循环执行的语句。<br>例子:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql">add_num: LOOP<br>    <span class="hljs-keyword">SET</span> counter<span class="hljs-operator">=</span><span class="hljs-variable">@counter</span><span class="hljs-operator">+</span><span class="hljs-number">1</span>;<br><span class="hljs-keyword">END</span> LOOP add_num;<br></code></pre></td></tr></table></figure>
<p>该示例循环执行counter加1的操作。因为没有跳出循环的语句（没有使用LEAVE语句)，这个循环成了一个死循环。LOOP循环都以END LOOP结束</p>
<h3 id="leave语句"><a href="#leave语句" class="headerlink" title="leave语句"></a>leave语句</h3><p>LEAVE语句主要用于跳出循环控制。其语法形式如下:<br>LEAVE label;<br>其中，label参数表示循环的标志，LEAVE语句必须跟在循环标志前面。一般LEAVE配合LOOP进行使用，使用条件判断来控制是否终止循环。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql">add_num: LOOP<br>    <span class="hljs-keyword">SET</span> counter<span class="hljs-operator">=</span><span class="hljs-variable">@counter</span><span class="hljs-operator">+</span><span class="hljs-number">1</span>;<br>    IF counter <span class="hljs-operator">=</span> <span class="hljs-number">100</span> <span class="hljs-keyword">THEN</span><br>        LEAVE add_num;<br>    <span class="hljs-keyword">ELSE</span> IF <span class="hljs-built_in">MOD</span>(counter, <span class="hljs-number">3</span>)<span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-keyword">THEN</span><br>        ITERATE add_num;<br>        <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br>        <span class="hljs-keyword">FROM</span> example.order_totals;<br>    <span class="hljs-keyword">END</span> IF;<br><span class="hljs-keyword">END</span> LOOP add_num;<br></code></pre></td></tr></table></figure>
<p><strong>LEAVE与ITERATE的区别</strong><br>LEAVE语句和ITERATE语句都用来跳出循环语句，但两者的功能是不一样的。LEAVE语句是跳出整个循环,然后执行循环后面的程序。而ITERATE语句是跳出本次循环，然后进入下一次循环。使用这两个语句时一定要区分清楚。</p>
<h3 id="while语句"><a href="#while语句" class="headerlink" title="while语句"></a>while语句</h3><p>WHILE语句也是有条件控制的循环语句。WHILE语句和REPEAT语句不同的是,WHILE语句是当满足条件时，执行循环内的语句，否则退出循环。WHILE语句的基本语法形式如下:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql">[begin_label:] WHILE search_condition DO<br>    statement_list<br>    UNTIL search_condition<br><span class="hljs-keyword">END</span> WHILE [end_label]<br></code></pre></td></tr></table></figure>
<p>其中</p>
<ul>
<li>search_condition参数表示循环执行的条件，满足该条件时循环执行</li>
<li>statement_list参数表示循环的执行语句。</li>
<li>WHILE循环需要使用END WHILE来结束<figure class="highlight sql"><table><tr><td class="code"><pre><code class="hljs sql">WHILE counter <span class="hljs-operator">&lt;</span> <span class="hljs-number">100</span> DO<br>    <span class="hljs-keyword">SET</span> counter<span class="hljs-operator">=</span><span class="hljs-variable">@counter</span><span class="hljs-operator">+</span><span class="hljs-number">1</span>;<br><span class="hljs-keyword">END</span> WHILE;<br></code></pre></td></tr></table></figure>
循环执行counter 加1的操作，counter值小于100时执行循环。如果counter值等于100了，则跳出循环</li>
</ul>

    
  </article>

  
      
    <div class="nexmoe-post-copyright">
        <strong>本文作者：</strong>折影轻梦<br>
        <strong>本文链接：</strong><a href="https://nexmoe.com/shu-ju-ku/mysql/da-shu-ju-xue-xi/db20-db21-db22/db20-cun-chu-guo-cheng-bian-cheng-ji-chu.html" title="https:&#x2F;&#x2F;nexmoe.com&#x2F;shu-ju-ku&#x2F;mysql&#x2F;da-shu-ju-xue-xi&#x2F;db20-db21-db22&#x2F;db20-cun-chu-guo-cheng-bian-cheng-ji-chu.html" target="_blank" rel="noopener">https:&#x2F;&#x2F;nexmoe.com&#x2F;shu-ju-ku&#x2F;mysql&#x2F;da-shu-ju-xue-xi&#x2F;db20-db21-db22&#x2F;db20-cun-chu-guo-cheng-bian-cheng-ji-chu.html</a><br>
        
            <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可

        
    </div>


  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
   
    
        <a class="nexmoefont icon-tag-fill -none-link" href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" rel="tag">大数据</a>
    
</div>
  
  

  
      <div class="nexmoe-post-footer">
          <script src="https://giscus.app/client.js"
    data-repo="nexmoe/nexmoe.com"
    data-repo-id="R_kgDOJI1XUA"
    data-category="General"
    data-category-id="DIC_kwDOJI1XUM4CU1nn"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="preferred_color_scheme"
    data-lang="en"
    data-loading="lazy"
    crossorigin="anonymous"
    async>
</script>

      </div>
  
</div>
</div>
        <div class="nexmoe-post-right">
              <div class="nexmoe-fixed">
                  <div class="nexmoe-tool"> 
                    
                      
                        
                          
                          
                              <button class="mdui-fab catalog" style="overflow:unset;">
                                  <i class="nexmoefont icon-i-catalog"></i>
                                  <div class="nexmoe-toc">
                                      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL%E5%8F%98%E9%87%8F"><span class="toc-number">1.</span> <span class="toc-text">MySQL变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F"><span class="toc-number">2.</span> <span class="toc-text">查看系统变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F"><span class="toc-number">3.</span> <span class="toc-text">修改系统变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BC%9A%E8%AF%9D%E5%8F%98%E9%87%8F"><span class="toc-number">4.</span> <span class="toc-text">用户自定义会话变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F"><span class="toc-number">5.</span> <span class="toc-text">用户自定义局部变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F%E8%AF%A6%E8%A7%A3"><span class="toc-number">6.</span> <span class="toc-text">用户自定义变量详解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#if%E8%AF%AD%E5%8F%A5"><span class="toc-number">7.</span> <span class="toc-text">if语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#case%E8%AF%AD%E5%8F%A5"><span class="toc-number">8.</span> <span class="toc-text">case语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#loop%E8%AF%AD%E5%8F%A5"><span class="toc-number">9.</span> <span class="toc-text">loop语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#leave%E8%AF%AD%E5%8F%A5"><span class="toc-number">10.</span> <span class="toc-text">leave语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#while%E8%AF%AD%E5%8F%A5"><span class="toc-number">11.</span> <span class="toc-text">while语句</span></a></li></ol>
                                  </div>
                              </button>
                          
                          
                      
                    
                      <a href="#nexmoe-content" class="toc-link" aria-label="Back To Top" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
                  </div>
              </div>
            </div>
    </div>
    <div id="nexmoe-search-space">
	<div class="search-container">
		<div class="search-header">
			<div class="search-input-container">
				<input
					class="search-input"
					type="text"
					placeholder="搜索"
					oninput="sinput();"
				/>
			</div>
			<a class="search-close" onclick="sclose();">×</a>
		</div>
		<div class="search-body"></div>
	</div>
</div>

    
    
</body>

</html>
