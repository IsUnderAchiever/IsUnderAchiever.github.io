<!DOCTYPE html>

<html lang="zh-CN">

<head>
    
    <title>初识springcloud - 折影轻梦</title>
    <meta charset="UTF-8">
    <meta name="keywords" content="折影轻梦,Mixcm,轻惋,觅漫者,小舒同学,Xiaoshu,Nexmoe,产品,Meteor,探索者小舒,伴学OS1,Theme,Design,Product">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
    <meta name="description" content="基本配置源码在底部链接处  新建springcloud项目文件夹 直接用idea打开 springcloud文件夹（右键选择idea打开 或者 将文件夹拖到idea图标上） 新建两个springboot项目【user-service、order-service】 右键新建，选择module 同理新建order-service项目（步骤如上） 附：若某个项目没有被识别，找到该项目的pom.xml，右">
<meta property="og:type" content="article">
<meta property="og:title" content="初识springcloud">
<meta property="og:url" content="https://nexmoe.com/bian-cheng-yu-yan/java/xue-xi/kuang-jia/springcloud/day1/chu-shi-springcloud/chu-shi-springcloud.html">
<meta property="og:site_name" content="折影轻梦">
<meta property="og:description" content="基本配置源码在底部链接处  新建springcloud项目文件夹 直接用idea打开 springcloud文件夹（右键选择idea打开 或者 将文件夹拖到idea图标上） 新建两个springboot项目【user-service、order-service】 右键新建，选择module 同理新建order-service项目（步骤如上） 附：若某个项目没有被识别，找到该项目的pom.xml，右">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201938111.png">
<meta property="og:image" content="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201938936.png">
<meta property="og:image" content="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201938972.png">
<meta property="og:image" content="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939197.png">
<meta property="og:image" content="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939919.png">
<meta property="og:image" content="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939327.png">
<meta property="og:image" content="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939799.png">
<meta property="og:image" content="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939256.png">
<meta property="og:image" content="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939028.png">
<meta property="og:image" content="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939697.png">
<meta property="og:image" content="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939559.png">
<meta property="og:image" content="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939923.png">
<meta property="og:image" content="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939927.png">
<meta property="og:image" content="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939521.png">
<meta property="og:image" content="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201940658.png">
<meta property="og:image" content="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201940506.png">
<meta property="article:published_time" content="2022-12-23T12:00:00.000Z">
<meta property="article:modified_time" content="2024-06-01T14:12:24.996Z">
<meta property="article:author" content="折影轻梦">
<meta property="article:tag" content="springcloud">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201938111.png">
    
<link rel="stylesheet" href="/lib/fancybox/fancybox.css">
<link rel="stylesheet" href="/lib/mdui_043tiny/mdui.css">


    <link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1717251230630">
    
    <link rel="stylesheet" href="/css/style.css?v=1717251230630">

    
        
            <link rel="stylesheet" href="/custom.css?v=1717251230630">
        
    

    
<script src="/lib/mdui_043tiny/mdui.js" async></script>
<script src="/lib/fancybox/fancybox.umd.js" async></script>


    <script async src="/js/app.js?v=1717251230630"></script>
    
     

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4D4ZJ9G024"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag("js", new Date());

  gtag("config", "G-4D4ZJ9G024");
</script>

<meta name="generator" content="Hexo 6.3.0"></head>

<body class="mdui-drawer-body-left">
    <div id="nexmoe-background">
        <div class="nexmoe-bg" 
            style="background-image: url(https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102206.jpg)"
        ></div>
        <div class="mdui-appbar mdui-shadow-0">
            <div class="mdui-toolbar">
                <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
                <div class="mdui-toolbar-spacer"></div>
                <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
                <a href="/" title="折影轻梦" class="mdui-btn mdui-btn-icon"><img src="https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102017.jpg" alt="折影轻梦"></a>
            </div>
        </div>
    </div>
    <div id="nexmoe-header">
        <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="折影轻梦">
            <img src="https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102017.jpg" alt="折影轻梦" alt="折影轻梦">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>168</div>
        <div><span>标签</span>60</div>
        <div><span>分类</span>61</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/archive.html" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/life.html" title="我的生活">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的生活
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/about.html" title="关于博主">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博主
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
        
            
            <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
        
            <form id="search_form">
                <label><input class="st-default-search-input" id="search_value" name="q" type="search" placeholder="搜索" style="
                    font-size: 15px !important;
                    height: 56px !important;
                    background-image: none;
                "></label>
            </form>
         
    </div>
</div>


	<script async src="/js/search.js?v=1717251230630"></script>



        
            
            <div class="nexmoe-widget-wrap">
	<div class="nexmoe-widget nexmoe-social">
		<a
			class="mdui-ripple"
			href="http://wpa.qq.com/msgrd?v=3&uin=938798576&site=qq&menu=yes"
			target="_blank"
			mdui-tooltip="{content: 'QQ群'}"
			style="
				color: rgb(249, 174, 8);
				background-color: rgba(249, 174, 8, .1);
			"
		>
			<i
				class="nexmoefont icon-QQ"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://space.bilibili.com/477448861/"
			target="_blank"
			mdui-tooltip="{content: '哔哩哔哩'}"
			style="
				color: rgb(231, 106, 141);
				background-color: rgba(231, 106, 141, .1);
			"
		>
			<i
				class="nexmoefont icon-bilibili"
			></i> </a
		>
	</div>
</div>

        
            
            
            
            
            
            
    </aside>
    <div class="nexmoe-copyright">
        &copy; 2024 折影轻梦
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        
    </div>
</div><!-- .nexmoe-drawer -->
    </div>
    <div id="nexmoe-content">
        <div class="nexmoe-primary">
    <div class="nexmoe-post">
  <article>
    
        <div class="nexmoe-post-cover"> 
            <img src="https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102206.jpg" alt="初识springcloud" loading="lazy">
            <h1>初识springcloud</h1>
        </div>
    
    
    <div class="nexmoe-post-meta">
    <div class="nexmoe-rainbow">
        <a class="nexmoefont icon-calendar-fill">2022年12月23日</a>
        
            <a class="nexmoefont icon-appstore-fill -link" href="/categories/springcloud/">springcloud</a>
        
        
    </div>
    
    
    
    
    
</div>

    <h2 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h2><p>源码在底部链接处</p>
<ol>
<li>新建springcloud项目文件夹<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201938111.png" alt="1" data-caption="1" loading="lazy"></li>
<li>直接用idea打开 springcloud文件夹（右键选择idea打开 或者 将文件夹拖到idea图标上）</li>
<li>新建两个springboot项目【user-service、order-service】</li>
<li>右键新建，选择module<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201938936.png" alt="2" data-caption="2" loading="lazy"><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201938972.png" alt="3" data-caption="3" loading="lazy"><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939197.png" alt="4" data-caption="4" loading="lazy"></li>
<li>同理新建order-service项目（步骤如上）</li>
<li>附：<strong>若某个项目没有被识别</strong>，找到该项目的pom.xml，右键选择add as maven project即可<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939919.png" alt="11" data-caption="11" loading="lazy"></li>
<li>数据库准备<ul>
<li>新建两个<strong>数据库</strong>，分别是cloud-order、cloud-user</li>
<li>在各自的数据库上建表，这里就以一个表为例（tb_user、tb_order）</li>
<li>随意插入一些数据<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939327.png" alt="5" data-caption="5" loading="lazy"><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939799.png" alt="6" data-caption="6" loading="lazy"></li>
</ul>
</li>
<li>导入mybatis-plus的依赖、swagger的依赖以及mybatis-plus自动生成的依赖【两个项目都要导入这些依赖】<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- mybatis-plus --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--新版 mybatis-plus 自动生成器--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- freemarker --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.freemarker<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>freemarker<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.31<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--Swagger3.x--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.springfox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springfox-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li>
<li>编写mybatis-plus自动生成类<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.example.userservice;<br><br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.FieldFill;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.generator.FastAutoGenerator;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.generator.config.OutputFile;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.generator.config.rules.DateType;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.generator.fill.Column;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.generator.fill.Property;<br><br><span class="hljs-keyword">import</span> java.util.Collections;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Generator</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//配置相关的数据库连接</span><br>        <span class="hljs-comment">// TODO TODO</span><br>        FastAutoGenerator.create(<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/cloud-user?serverTimezone=Asia/Shanghai&quot;</span>, <span class="hljs-string">&quot;root&quot;</span>, <span class="hljs-string">&quot;root&quot;</span>)<br>                .globalConfig(builder -&gt; &#123;<br>                    builder.author(<span class="hljs-string">&quot;深海火锅店&quot;</span>) <span class="hljs-comment">// 设置作者</span><br>                            .enableSwagger() <span class="hljs-comment">// 开启 swagger 模式</span><br>                            .fileOverride() <span class="hljs-comment">// 覆盖已生成文件</span><br>                            <span class="hljs-comment">// TODO TODO</span><br>                            .outputDir(<span class="hljs-string">&quot;XXX\\Desktop\\springcloud\\user-service\\src\\main\\java\\&quot;</span>) <span class="hljs-comment">// 指定输出目录</span><br>                            .dateType(DateType.ONLY_DATE);<br>                &#125;)<br>                .packageConfig(builder -&gt; &#123;<br>                    <span class="hljs-comment">// TODO TODO</span><br>                    builder.parent(<span class="hljs-string">&quot;com.example.userservice&quot;</span>) <span class="hljs-comment">// 设置父包名</span><br><span class="hljs-comment">//                            .moduleName(&quot;&quot;) // 设置父包模块名</span><br>                            .entity(<span class="hljs-string">&quot;domain&quot;</span>)<br>                            .controller(<span class="hljs-string">&quot;controller&quot;</span>)<br>                            .mapper(<span class="hljs-string">&quot;mapper&quot;</span>)<br>                            .service(<span class="hljs-string">&quot;service&quot;</span>)<br>                            .serviceImpl(<span class="hljs-string">&quot;service.impl&quot;</span>)<br>                          <span class="hljs-comment">// TODO TODO 写项目的路径</span><br>                            .pathInfo(Collections.singletonMap(OutputFile.xml, <span class="hljs-string">&quot;user-service\\src\\main\\resources\\mapper\\&quot;</span>)); <span class="hljs-comment">// 设置mapperXml生成路径</span><br>                &#125;)<br>                .strategyConfig(builder -&gt; &#123;<br>                    builder.addInclude(<span class="hljs-string">&quot;tb_user&quot;</span>)<span class="hljs-comment">// 设置需要生成的表名</span><br>                            <span class="hljs-comment">// TODO TODO</span><br>                            .addTablePrefix(<span class="hljs-string">&quot;tb_&quot;</span>) <span class="hljs-comment">// 设置过滤表前缀</span><br>                            .mapperBuilder()<br>                            <span class="hljs-comment">// 控制器controller配置</span><br>                            .controllerBuilder()<br>                            <span class="hljs-comment">// 开启生成@RestController 控制器</span><br>                            .enableRestStyle()<br>                            <span class="hljs-comment">// 开启驼峰转连字符</span><br>                            .enableHyphenStyle()<br>                            <span class="hljs-comment">// 开启父类</span><br><span class="hljs-comment">//                            .superClass(&quot;com.mybatisplus.generator.controller.BaseController&quot;)</span><br>                            <span class="hljs-comment">// 控制器统一后缀</span><br>                            .formatFileName(<span class="hljs-string">&quot;%sController&quot;</span>)<br><br>                            <span class="hljs-comment">// service配置</span><br>                            .serviceBuilder()<br>                            <span class="hljs-comment">// service统一后缀</span><br>                            .formatServiceFileName(<span class="hljs-string">&quot;%sService&quot;</span>)<br>                            <span class="hljs-comment">// serviceImpl统一后缀</span><br>                            .formatServiceImplFileName(<span class="hljs-string">&quot;%sServiceImpl&quot;</span>)<br><br>                            <span class="hljs-comment">//mapper配置</span><br>                            .mapperBuilder()<br>                            <span class="hljs-comment">// 生成基础字段的map映射map</span><br>                            .enableBaseResultMap()<br>                            <span class="hljs-comment">// 生成基础查询的sql</span><br>                            .enableBaseColumnList()<br><br>                            <span class="hljs-comment">// 实体类配置</span><br>                            .entityBuilder()<br>                            <span class="hljs-comment">// 开启链式模型，开启lombok模型不需要开启这个</span><br><span class="hljs-comment">//                            .enableChainModel()</span><br>                            <span class="hljs-comment">// 开启lombok模型</span><br>                            .enableLombok()<br>                            <span class="hljs-comment">// 开启表字段注解</span><br>                            .enableTableFieldAnnotation()<br>                            <span class="hljs-comment">// 逻辑删除字段</span><br>                            <span class="hljs-comment">// TODO TODO</span><br>                            <span class="hljs-comment">//.logicDeleteColumnName(&quot;is_deleted&quot;)</span><br>                            <span class="hljs-comment">// 数据库表映射到实体的命名策略</span><br>                            .naming(NamingStrategy.underline_to_camel)<br>                            <span class="hljs-comment">// 数据库表字段映射到实体的命名策略,驼峰命名，这个未设置会按照naming来配置</span><br><span class="hljs-comment">//                            .columnNaming(NamingStrategy.underline_to_camel)</span><br>                            <span class="hljs-comment">// 指定实体类父类</span><br><span class="hljs-comment">//                            .superClass(&quot;com.mybatisplus.generator.entity.BaseEntity&quot;)</span><br>                            <span class="hljs-comment">// 父类字段</span><br><span class="hljs-comment">//                            .addSuperEntityColumns(&quot;id&quot;, &quot;create_id&quot;, &quot;modify_id&quot;, &quot;create_date&quot;, &quot;modify_date&quot;, &quot;is_deleted&quot;)</span><br><span class="hljs-comment">//                             开启 ActiveRecord 模式，即实体类继承Model类,自己提供CRUD操作,不建议使用,会和父类形成单继承冲突</span><br><span class="hljs-comment">//                            .enableActiveRecord()</span><br>                            <span class="hljs-comment">// 表字段填充字段，对应数据库字段，插入的时候自动填充</span><br>                            .addTableFills(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Column</span>(<span class="hljs-string">&quot;create_date&quot;</span>, FieldFill.INSERT))<br>                            <span class="hljs-comment">// 表字段填充字段，对应实体类字段，插入的时候自动填充</span><br>                            .addTableFills(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Property</span>(<span class="hljs-string">&quot;createDate&quot;</span>, FieldFill.INSERT))<br>                            <span class="hljs-comment">// 表字段填充字段，对应数据库字段，更新的时候自动填充</span><br>                            .addTableFills(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Column</span>(<span class="hljs-string">&quot;modify_date&quot;</span>, FieldFill.UPDATE))<br>                            <span class="hljs-comment">// 表字段填充字段，对应实体类字段，更新的时候自动填充</span><br>                            .addTableFills(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Property</span>(<span class="hljs-string">&quot;modifyDate&quot;</span>, FieldFill.UPDATE))<br>                            <span class="hljs-comment">// 忽略的字段</span><br><span class="hljs-comment">//                            .addIgnoreColumns(&quot;version&quot;)</span><br>                            <span class="hljs-comment">// id自增</span><br>                            .idType(IdType.AUTO);<br>                    <span class="hljs-comment">// 实体类统一后缀</span><br>                &#125;)<br>                .templateEngine(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FreemarkerTemplateEngine</span>()) <span class="hljs-comment">// 使用Freemarker引擎模板，默认的是Velocity引擎模板</span><br>                .execute();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<strong>注意</strong>:以上写了&#x2F;&#x2F; TODO的地方都需要注意<ol>
<li>数据库的连接</li>
<li>项目的地址</li>
<li>项目的名称</li>
<li>xml文件的路径，名称要改</li>
<li>表过滤前缀</li>
<li>逻辑删除字段（表中没有这个字段，可以注释掉）</li>
</ol>
</li>
<li>运行main方法后自动生成，结构如下<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939256.png" alt="7" data-caption="7" loading="lazy"><br>order同理生成（略）<br>建议在Generator内直接ctrl+f搜索user关键词，改为order即可</li>
<li>先简单写个get方法来测试一下<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ordercontroller</span><br><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(&quot;/order&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderController</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> OrderService orderService;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> Object <span class="hljs-title function_">getOrder</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;<br>        <span class="hljs-keyword">return</span> orderService.getById(id);<br>    &#125;<br><br>&#125;<br><br><span class="hljs-comment">// usercontroller</span><br><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(&quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserService userService;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;<br>        <span class="hljs-keyword">return</span> userService.getById(id);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li>
<li>order启动类上加入@MapperScan注解【OrderServiceApplication】—-user同理<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.example.orderservice;<br><br><span class="hljs-keyword">import</span> org.mybatis.spring.annotation.MapperScan;<br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@MapperScan(&quot;com.example.orderservice.mapper&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderServiceApplication</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(OrderServiceApplication.class, args);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li>
<li>配置application.properties【两个项目】<br>【user】<figure class="highlight properties"><table><tr><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># 应用名称</span><br><span class="hljs-attr">spring.application.name</span>=<span class="hljs-string">user-service</span><br><span class="hljs-comment"># 应用服务 WEB 访问端口</span><br><span class="hljs-attr">server.port</span>=<span class="hljs-string">8081</span><br><span class="hljs-comment"># 数据库驱动：</span><br><span class="hljs-attr">spring.datasource.driver-class-name</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br><span class="hljs-comment"># 数据源名称</span><br><span class="hljs-attr">spring.datasource.name</span>=<span class="hljs-string">defaultDataSource</span><br><span class="hljs-comment"># 数据库连接地址</span><br><span class="hljs-attr">spring.datasource.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/cloud-user?serverTimezone=UTC</span><br><span class="hljs-comment"># 数据库用户名&amp;密码：</span><br><span class="hljs-attr">spring.datasource.username</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">spring.datasource.password</span>=<span class="hljs-string">123456</span><br><span class="hljs-comment"># 配置mybatis-plus 打印sql日志</span><br><span class="hljs-attr">mybatis-plus.configuration.log-impl</span>=<span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># xml文件路径</span><br><span class="hljs-attr">mybatis-plus.mapper-locations</span>=<span class="hljs-string">classpath:/mapper/**/*.xml</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 配置最新全局配置文件</span><br><span class="hljs-comment">#mybatis-plus.config-location=classpath:mybatis-config.xml</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 配置mybatis-plus 包路径</span><br><span class="hljs-attr">mybatis-plus.type-aliases-package</span>=<span class="hljs-string">com.example.userservice.domain</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># mybatis-plus下划线转驼峰配置，默认为true</span><br><span class="hljs-attr">mybatis-plus.configuration.map-underscore-to-camel-case</span>=<span class="hljs-string">true</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 配置全局默认主键类型，实体类不用加@TableId(value =&quot;id&quot;,type = IdType.AUTO)</span><br><span class="hljs-attr">mybatis-plus.global-config.db-config.id-type</span>=<span class="hljs-string">auto</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 逻辑删除 （1为删除，0为未删除）</span><br><span class="hljs-comment">#mybatis-plus.global-config.db-config.logic-delete-value=1</span><br><span class="hljs-comment">#mybatis-plus.global-config.db-config.logic-not-delete-value=0</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 如果java实体类没加注解@TableLogic，则可以配置这个，推介这里配置</span><br><span class="hljs-comment">#mybatis-plus.global-config.db-config.logic-delete-field=is_deleted</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># ==========自定义swagger配置==========</span><br><span class="hljs-attr">swagger.enable</span>=<span class="hljs-string">true</span><br><span class="hljs-attr">swagger.application-name</span>=<span class="hljs-string">$&#123;spring.application.name&#125;</span><br><span class="hljs-attr">swagger.application-version</span>=<span class="hljs-string">1.0</span><br><span class="hljs-comment">#swagger.application-description=1024shop电商平台管理后端接口文档</span><br><span class="hljs-attr">swagger.application-description</span>=<span class="hljs-string">user</span><br><span class="hljs-comment"># swagger3</span><br><span class="hljs-attr">spring.mvc.pathmatch.matching-strategy</span>=<span class="hljs-string">ant_path_matcher</span><br><br></code></pre></td></tr></table></figure>
【order】<figure class="highlight properties"><table><tr><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># 应用名称</span><br><span class="hljs-attr">spring.application.name</span>=<span class="hljs-string">order-service</span><br><span class="hljs-comment"># 应用服务 WEB 访问端口</span><br><span class="hljs-attr">server.port</span>=<span class="hljs-string">8082</span><br><span class="hljs-comment"># 数据库驱动：</span><br><span class="hljs-attr">spring.datasource.driver-class-name</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br><span class="hljs-comment"># 数据源名称</span><br><span class="hljs-attr">spring.datasource.name</span>=<span class="hljs-string">defaultDataSource</span><br><span class="hljs-comment"># 数据库连接地址</span><br><span class="hljs-attr">spring.datasource.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/cloud-order?serverTimezone=UTC</span><br><span class="hljs-comment"># 数据库用户名&amp;密码：</span><br><span class="hljs-attr">spring.datasource.username</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">spring.datasource.password</span>=<span class="hljs-string">123456</span><br><span class="hljs-comment"># 配置mybatis-plus 打印sql日志</span><br><span class="hljs-attr">mybatis-plus.configuration.log-impl</span>=<span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># xml文件路径</span><br><span class="hljs-attr">mybatis-plus.mapper-locations</span>=<span class="hljs-string">classpath:/mapper/**/*.xml</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 配置最新全局配置文件</span><br><span class="hljs-comment">#mybatis-plus.config-location=classpath:mybatis-config.xml</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 配置mybatis-plus 包路径</span><br><span class="hljs-attr">mybatis-plus.type-aliases-package</span>=<span class="hljs-string">com.example.orderservice.domain</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># mybatis-plus下划线转驼峰配置，默认为true</span><br><span class="hljs-attr">mybatis-plus.configuration.map-underscore-to-camel-case</span>=<span class="hljs-string">true</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 配置全局默认主键类型，实体类不用加@TableId(value =&quot;id&quot;,type = IdType.AUTO)</span><br><span class="hljs-attr">mybatis-plus.global-config.db-config.id-type</span>=<span class="hljs-string">auto</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 逻辑删除 （1为删除，0为未删除）</span><br><span class="hljs-comment">#mybatis-plus.global-config.db-config.logic-delete-value=1</span><br><span class="hljs-comment">#mybatis-plus.global-config.db-config.logic-not-delete-value=0</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># 如果java实体类没加注解@TableLogic，则可以配置这个，推介这里配置</span><br><span class="hljs-comment">#mybatis-plus.global-config.db-config.logic-delete-field=is_deleted</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># ==========自定义swagger配置==========</span><br><span class="hljs-attr">swagger.enable</span>=<span class="hljs-string">true</span><br><span class="hljs-attr">swagger.application-name</span>=<span class="hljs-string">$&#123;spring.application.name&#125;</span><br><span class="hljs-attr">swagger.application-version</span>=<span class="hljs-string">1.0</span><br><br><span class="hljs-attr">swagger.application-description</span>=<span class="hljs-string">order</span><br><span class="hljs-comment"># swagger3</span><br><span class="hljs-attr">spring.mvc.pathmatch.matching-strategy</span>=<span class="hljs-string">ant_path_matcher</span><br></code></pre></td></tr></table></figure></li>
<li>复制一份pom.xml到springcloud根目录进行修改<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span> <span class="hljs-comment">&lt;!-- lookup parent from repository --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springcloud<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>springcloud项目<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>order-service<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>user-service<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br><br></code></pre></td></tr></table></figure>
<img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939028.png" alt="12" data-caption="12" loading="lazy"></li>
<li>运行项目，测试<ul>
<li><a target="_blank" rel="noopener" href="http://localhost:8081/user/1">http://localhost:8081/user/1</a> 测试用户模块<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939697.png" alt="8" data-caption="8" loading="lazy"></li>
<li><a target="_blank" rel="noopener" href="http://localhost:8082/order/1">http://localhost:8082/order/1</a> 测试订单模块<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939559.png" alt="9" data-caption="9" loading="lazy"></li>
</ul>
</li>
<li>swagger配置【不需要swagger则可省略】<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ConfigurationProperties(&quot;swagger&quot;)</span> <span class="hljs-comment">// 映射到properties配置，省略前缀</span><br><span class="hljs-meta">@EnableOpenApi</span> <span class="hljs-comment">// 开启规范</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SwaggerConfiguration</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 是否开启swagger，生产环境一般关闭，所以这里定义一个变量</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Boolean enable;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 项目应用名</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String applicationName;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 项目版本信息</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String applicationVersion;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 项目描述信息</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String applicationDescription;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> Docket <span class="hljs-title function_">docket</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Docket</span>(DocumentationType.OAS_30)<br>                .pathMapping(<span class="hljs-string">&quot;/&quot;</span>)<br>                <span class="hljs-comment">// 定义是否开启swagger，false为关闭，可以通过变量控制，线上关闭</span><br>                .enable(enable)<br>                <span class="hljs-comment">//配置api文档元信息</span><br>                .apiInfo(apiInfo())<br>                <span class="hljs-comment">// 选择哪些接口作为swagger的doc发布</span><br>                .select()<br>                <span class="hljs-comment">//apis() 控制哪些接口暴露给swagger，</span><br>                <span class="hljs-comment">// RequestHandlerSelectors.any() 所有都暴露</span><br>                <span class="hljs-comment">// RequestHandlerSelectors.basePackage(&quot;net.xdclass.*&quot;)  指定包位置</span><br>                <span class="hljs-comment">// withMethodAnnotation(ApiOperation.class)标记有这个注解 ApiOperation</span><br>                .apis(RequestHandlerSelectors.withMethodAnnotation(ApiOperation.class))<br>                .paths(PathSelectors.any())<br>                .build();<br>    &#125;<br>    <span class="hljs-keyword">private</span> ApiInfo <span class="hljs-title function_">apiInfo</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiInfoBuilder</span>()<br>                .title(applicationName)<br>                .description(applicationDescription)<br>                .contact(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Contact</span>(<span class="hljs-string">&quot;深海火锅店&quot;</span>, <span class="hljs-string">&quot;tongstyle.gitee.io&quot;</span>, <span class="hljs-string">&quot;938798576@aliyun.com&quot;</span>))<br>                .version(applicationVersion)<br>                .build();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939923.png" alt="10" data-caption="10" loading="lazy"><br>order模块同理配置<br>在controller中添加注解，在类上添加@Api注解，在方法上添加@ApiOperation(“description”)注解<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(&quot;/order&quot;)</span><br><span class="hljs-meta">@Api</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderController</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> OrderService orderService;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span><br>    <span class="hljs-meta">@ApiOperation(&quot;查找用户&quot;)</span><br>    <span class="hljs-keyword">private</span> Object <span class="hljs-title function_">getOrder</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;<br>        <span class="hljs-keyword">return</span> orderService.getById(id);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
order模块同理配置</li>
</ol>
<h2 id="服务调用"><a href="#服务调用" class="headerlink" title="服务调用"></a>服务调用</h2><p>在order模块中调用user的方法【在订单中查找用户的信息】<br>在order模块中导入user模块的依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>user-service<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>在Order实体类中添加如下属性</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ApiModelProperty(&quot;用户信息&quot;)</span><br><span class="hljs-meta">@TableField(exist = false)</span><br><span class="hljs-keyword">private</span> User user;<br></code></pre></td></tr></table></figure>
<p>在order启动类OrderServiceApplication中添加如下方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title function_">restTemplate</span><span class="hljs-params">()</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>在orderservice中添加如下方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java">Order <span class="hljs-title function_">queryOrderById</span><span class="hljs-params">(Long orderId)</span>;<br></code></pre></td></tr></table></figure>
<p>并在impl里重写该方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> Order <span class="hljs-title function_">queryOrderById</span><span class="hljs-params">(Long orderId)</span>&#123;<br>    <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> baseMapper.selectById(orderId);<br>    String url=<span class="hljs-string">&quot;http://localhost:8081/user/&quot;</span>+order.getUserId();<br>    <span class="hljs-type">User</span> <span class="hljs-variable">forObject</span> <span class="hljs-operator">=</span> restTemplate.getForObject(url, User.class);<br>    order.setUser(forObject);<br>    <span class="hljs-keyword">return</span> order;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>更改OrderController代码</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span><br><span class="hljs-meta">@ApiOperation(&quot;查找订单&quot;)</span><br><span class="hljs-keyword">private</span> Object <span class="hljs-title function_">getOrder</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;<br>    <span class="hljs-keyword">return</span> orderService.queryOrderById(id);<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939927.png" alt="13" data-caption="13" loading="lazy"><br>当然，不添加User依赖，直接在order新建一个user实体类其实也可以</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br>    <span class="hljs-keyword">private</span> Long id;<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-keyword">private</span> String address;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>但是有一个非常严重的问题</strong>：以上实现的业务是根据订单查用户，如果还需要根据用户查订单的话，那么在用户模块继续导入订单模块就会形成一个问题，模块与模块之间的相互依赖关系<br>源码：<br>链接：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1FAVIVz92EwvNkGoMxIvMTQ?pwd=s1v5">https://pan.baidu.com/s/1FAVIVz92EwvNkGoMxIvMTQ?pwd=s1v5</a><br>提取码：s1v5</p>
<h2 id="更正"><a href="#更正" class="headerlink" title="更正"></a>更正</h2><p>之前一直没懂教程里是怎么在order服务里使用user服务的实体类的，起初我以为是上述写法，在order服务里引入了user服务的依赖，但是教程的代码里并没有引入user的依赖，所以我一直很疑惑。<br>难道是在order服务里直接写了一个user实体类？这不太优雅啊！而且…教程的代码里依然没有在order服务里找到user实体类。。。<br>视频看了几遍，找到了一个切入点…<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201939521.png" alt="14" data-caption="14" loading="lazy"><br>没有导入其他的包，所以…应该是在pojo里写了一个user实体类了，至于为什么给的代码里没在order里找到user实体类…<br>我只能解释为后期删掉了<br>其他的一样写，依然能实现上述效果<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201940658.png" alt="15" data-caption="15" loading="lazy"><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/blog-img/raw/master/img/202301201940506.png" alt="16" data-caption="16" loading="lazy"><br>链接：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1WerXmr-Ntp5rwhTVLMXOWQ?pwd=b75y">https://pan.baidu.com/s/1WerXmr-Ntp5rwhTVLMXOWQ?pwd=b75y</a><br>提取码：b75y<br>–来自百度网盘超级会员V3的分享</p>

    
  </article>

  
      

  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
   
    
        <a class="nexmoefont icon-tag-fill -none-link" href="/tags/springcloud/" rel="tag">springcloud</a>
    
</div>
  
  

  
      <div class="nexmoe-post-footer">
          <script src="https://giscus.app/client.js"
    data-repo="nexmoe/nexmoe.com"
    data-repo-id="R_kgDOJI1XUA"
    data-category="General"
    data-category-id="DIC_kwDOJI1XUM4CU1nn"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="preferred_color_scheme"
    data-lang="en"
    data-loading="lazy"
    crossorigin="anonymous"
    async>
</script>

      </div>
  
</div>
</div>
        <div class="nexmoe-post-right">
              <div class="nexmoe-fixed">
                  <div class="nexmoe-tool"> 
                    
                      
                        
                          
                          
                              <button class="mdui-fab catalog" style="overflow:unset;">
                                  <i class="nexmoefont icon-i-catalog"></i>
                                  <div class="nexmoe-toc">
                                      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-number">1.</span> <span class="toc-text">基本配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">服务调用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%AD%A3"><span class="toc-number">3.</span> <span class="toc-text">更正</span></a></li></ol>
                                  </div>
                              </button>
                          
                          
                      
                    
                      <a href="#nexmoe-content" class="toc-link" aria-label="Back To Top" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
                  </div>
              </div>
            </div>
    </div>
    <div id="nexmoe-search-space">
	<div class="search-container">
		<div class="search-header">
			<div class="search-input-container">
				<input
					class="search-input"
					type="text"
					placeholder="搜索"
					oninput="sinput();"
				/>
			</div>
			<a class="search-close" onclick="sclose();">×</a>
		</div>
		<div class="search-body"></div>
	</div>
</div>

    
    
</body>

</html>
