<!DOCTYPE html>

<html lang="zh-CN">

<head>
    
    <title>AOT学习 - 折影轻梦</title>
    <meta charset="UTF-8">
    <meta name="keywords" content="折影轻梦,Mixcm,轻惋,觅漫者,小舒同学,Xiaoshu,Nexmoe,产品,Meteor,探索者小舒,伴学OS1,Theme,Design,Product">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
    <meta name="description" content="AOT学习AOT学习 选自 尚硅谷Spring6教程  JIT just in time，动态编译(实时编译)，边运行边编译 在程序运行时候，动态生成代码 启动时比较慢，编译时需要占用运行时候资源 总结：程序运行过程中，把字节码转换成硬盘上直接运行的机器码，部署到环境的过程  AOT ahead of time，运行前编译，提前编译 可以把源代码直接转换成机器码，启动快，内存占用低 缺点:运行时不">
<meta property="og:type" content="article">
<meta property="og:title" content="AOT学习">
<meta property="og:url" content="https://nexmoe.com/bian-cheng-yu-yan/java/xue-xi/kuang-jia/spring/spring6/aot-xue-xi.html">
<meta property="og:site_name" content="折影轻梦">
<meta property="og:description" content="AOT学习AOT学习 选自 尚硅谷Spring6教程  JIT just in time，动态编译(实时编译)，边运行边编译 在程序运行时候，动态生成代码 启动时比较慢，编译时需要占用运行时候资源 总结：程序运行过程中，把字节码转换成硬盘上直接运行的机器码，部署到环境的过程  AOT ahead of time，运行前编译，提前编译 可以把源代码直接转换成机器码，启动快，内存占用低 缺点:运行时不">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048128.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048367.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048924.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048933.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048943.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048946.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048964.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048010.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048496.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048493.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048516.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048521.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048535.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048545.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048484.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048482.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048499.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048512.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048087.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048109.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048122.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048125.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112219840.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112220560.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112221435.png">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112223251.png">
<meta property="article:published_time" content="2023-03-16T10:00:00.000Z">
<meta property="article:modified_time" content="2024-06-01T14:32:53.508Z">
<meta property="article:author" content="折影轻梦">
<meta property="article:tag" content="Spring6">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048128.png">
    
<link rel="stylesheet" href="/lib/fancybox/fancybox.css">
<link rel="stylesheet" href="/lib/mdui_043tiny/mdui.css">


    <link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1717252409425">
    
    <link rel="stylesheet" href="/css/style.css?v=1717252409425">

    
        
            <link rel="stylesheet" href="/custom.css?v=1717252409425">
        
    

    
<script src="/lib/mdui_043tiny/mdui.js" async></script>
<script src="/lib/fancybox/fancybox.umd.js" async></script>


    <script async src="/js/app.js?v=1717252409425"></script>
    
     

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4D4ZJ9G024"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag("js", new Date());

  gtag("config", "G-4D4ZJ9G024");
</script>

<meta name="generator" content="Hexo 6.3.0"></head>

<body class="mdui-drawer-body-left">
    <div id="nexmoe-background">
        <div class="nexmoe-bg" 
            style="background-image: url(https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102206.jpg)"
        ></div>
        <div class="mdui-appbar mdui-shadow-0">
            <div class="mdui-toolbar">
                <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
                <div class="mdui-toolbar-spacer"></div>
                <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
                <a href="/" title="折影轻梦" class="mdui-btn mdui-btn-icon"><img src="https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102017.jpg" alt="折影轻梦"></a>
            </div>
        </div>
    </div>
    <div id="nexmoe-header">
        <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="折影轻梦">
            <img src="https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102017.jpg" alt="折影轻梦" alt="折影轻梦">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>168</div>
        <div><span>标签</span>60</div>
        <div><span>分类</span>61</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/archive.html" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/life.html" title="我的生活">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的生活
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/about.html" title="关于博主">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博主
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
        
            
            <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
        
            <form id="search_form">
                <label><input class="st-default-search-input" id="search_value" name="q" type="search" placeholder="搜索" style="
                    font-size: 15px !important;
                    height: 56px !important;
                    background-image: none;
                "></label>
            </form>
         
    </div>
</div>


	<script async src="/js/search.js?v=1717252409425"></script>



        
            
            <div class="nexmoe-widget-wrap">
	<div class="nexmoe-widget nexmoe-social">
		<a
			class="mdui-ripple"
			href="http://wpa.qq.com/msgrd?v=3&uin=938798576&site=qq&menu=yes"
			target="_blank"
			mdui-tooltip="{content: 'QQ群'}"
			style="
				color: rgb(249, 174, 8);
				background-color: rgba(249, 174, 8, .1);
			"
		>
			<i
				class="nexmoefont icon-QQ"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://space.bilibili.com/477448861/"
			target="_blank"
			mdui-tooltip="{content: '哔哩哔哩'}"
			style="
				color: rgb(231, 106, 141);
				background-color: rgba(231, 106, 141, .1);
			"
		>
			<i
				class="nexmoefont icon-bilibili"
			></i> </a
		>
	</div>
</div>

        
            
            
            
            
            
            
    </aside>
    <div class="nexmoe-copyright">
        &copy; 2024 折影轻梦
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        
    </div>
</div><!-- .nexmoe-drawer -->
    </div>
    <div id="nexmoe-content">
        <div class="nexmoe-primary">
    <div class="nexmoe-post">
  <article>
    
        <div class="nexmoe-post-cover"> 
            <img src="https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102206.jpg" alt="AOT学习" loading="lazy">
            <h1>AOT学习</h1>
        </div>
    
    
    <div class="nexmoe-post-meta">
    <div class="nexmoe-rainbow">
        <a class="nexmoefont icon-calendar-fill">2023年03月16日</a>
        
            <a class="nexmoefont icon-appstore-fill -link" href="/categories/Spring6/">Spring6</a>
        
        
    </div>
    
    
    
    
    
</div>

    <h1 id="AOT学习"><a href="#AOT学习" class="headerlink" title="AOT学习"></a>AOT学习</h1><h2 id="AOT学习-1"><a href="#AOT学习-1" class="headerlink" title="AOT学习"></a>AOT学习</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1kR4y1b7Qc/?spm_id_from=333.337.search-card.all.click&vd_source=0de2cc95ad0adc3e9ec15f6dcede1a20">选自 尚硅谷Spring6教程</a></p>
</blockquote>
<h3 id="JIT"><a href="#JIT" class="headerlink" title="JIT"></a>JIT</h3><blockquote>
<p>just in time，动态编译(实时编译)，边运行边编译</p>
<p>在程序运行时候，动态生成代码</p>
<p>启动时比较慢，编译时需要占用运行时候资源</p>
<p>总结：程序运行过程中，把字节码转换成硬盘上直接运行的机器码，部署到环境的过程</p>
</blockquote>
<h3 id="AOT"><a href="#AOT" class="headerlink" title="AOT"></a>AOT</h3><blockquote>
<p>ahead of time，运行前编译，提前编译</p>
<p>可以把源代码直接转换成机器码，启动快，内存占用低</p>
<p><code>缺点:</code>运行时不能优化，程序安装时间过长</p>
<p>总结：在程序运行之前，就把字节码转换成机器码</p>
</blockquote>
<h4 id="11-1-1、JIT与AOT的区别"><a href="#11-1-1、JIT与AOT的区别" class="headerlink" title="11.1.1、JIT与AOT的区别"></a>11.1.1、JIT与AOT的区别</h4><p>JIT和AOT 这个名词是指两种不同的编译方式，这两种编译方式的主要区别在于是否在“运行时”进行编译<br><strong>（1）JIT， Just-in-time,动态(即时)编译，边运行边编译；</strong><br>在程序运行时，根据算法计算出热点代码，然后进行 JIT 实时编译，这种方式吞吐量高，有运行时性能加成，可以跑得更快，并可以做到动态生成代码等，但是相对启动速度较慢，并需要一定时间和调用频率才能触发 JIT 的分层机制。JIT 缺点就是编译需要占用运行时资源，会导致进程卡顿。<br><strong>（2）AOT，Ahead Of Time，指运行前编译，预先编译。</strong><br>AOT 编译能直接将源代码转化为机器码，内存占用低，启动速度快，可以无需 runtime 运行，直接将 runtime 静态链接至最终的程序中，但是无运行时性能加成，不能根据程序运行情况做进一步的优化，AOT 缺点就是在程序运行前编译会使程序安装的时间增加。<br><strong>简单来讲：</strong>JIT即时编译指的是在程序的运行过程中，将字节码转换为可在硬件上直接运行的机器码，并部署至托管环境中的过程。而 AOT 编译指的则是，在程序运行之前，便将字节码转换为机器码的过程。</p>
<figure class="highlight livescript"><table><tr><td class="code"><pre><code class="hljs livescript">.java -&gt; .<span class="hljs-keyword">class</span> -&gt; <span class="hljs-function"><span class="hljs-params">(使用jaotc编译工具)</span> -&gt;</span> .so（程序函数库,即编译好的可以供其他程序使用的代码和数据）<br></code></pre></td></tr></table></figure>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048128.png" alt="image-20221207113544080" data-caption="image-20221207113544080" loading="lazy"><br><strong>（3）AOT的优点</strong><br><strong>简单来讲，</strong>Java 虚拟机加载已经预编译成二进制库，可以直接执行。不必等待及时编译器的预热，减少 Java 应用给人带来“第一次运行慢” 的不良体验。<br>在程序运行前编译，可以避免在运行时的编译性能消耗和内存消耗<br>可以在程序运行初期就达到最高性能，程序启动速度快<br>运行产物只有机器码，打包体积小<br><strong>AOT的缺点</strong><br>由于是静态提前编译，不能根据硬件情况或程序运行情况择优选择机器指令序列，理论峰值性能不如JIT<br>没有动态能力，同一份产物不能跨平台运行<br>第一种即时编译 (JIT) 是默认模式，Java Hotspot 虚拟机使用它在运行时将字节码转换为机器码。后者提前编译 (AOT)由新颖的 GraalVM 编译器支持，并允许在构建时将字节码直接静态编译为机器码。<br>现在正处于云原生，降本增效的时代，Java 相比于 Go、Rust 等其他编程语言非常大的弊端就是启动编译和启动进程非常慢，这对于根据实时计算资源，弹性扩缩容的云原生技术相冲突，Spring6 借助 AOT 技术在运行时内存占用低，启动速度快，逐渐的来满足 Java 在云原生时代的需求，对于大规模使用 Java 应用的商业公司可以考虑尽早调研使用 JDK17，通过云原生技术为公司实现降本增效。</p>
<h4 id="11-1-2、Graalvm"><a href="#11-1-2、Graalvm" class="headerlink" title="11.1.2、Graalvm"></a>11.1.2、Graalvm</h4><p>Spring6 支持的 AOT 技术，这个 GraalVM 就是底层的支持，Spring 也对 GraalVM 本机映像提供了一流的支持。GraalVM 是一种高性能 JDK，旨在加速用 Java 和其他 JVM 语言编写的应用程序的执行，同时还为 JavaScript、Python 和许多其他流行语言提供运行时。 GraalVM 提供两种运行 Java 应用程序的方法：在 HotSpot JVM 上使用 Graal 即时 (JIT) 编译器或作为提前 (AOT) 编译的本机可执行文件。 GraalVM 的多语言能力使得在单个应用程序中混合多种编程语言成为可能，同时消除了外语调用成本。GraalVM 向 HotSpot Java 虚拟机添加了一个用 Java 编写的高级即时 (JIT) 优化编译器。<br>GraalVM 具有以下特性：<br>（1）一种高级优化编译器，它生成更快、更精简的代码，需要更少的计算资源<br>（2）AOT 本机图像编译提前将 Java 应用程序编译为本机二进制文件，立即启动，无需预热即可实现最高性能<br>（3）Polyglot 编程在单个应用程序中利用流行语言的最佳功能和库，无需额外开销<br>（4）高级工具在 Java 和多种语言中调试、监视、分析和优化资源消耗<br>总的来说对云原生的要求不算高短期内可以继续使用 2.7.X 的版本和 JDK8，不过 Spring 官方已经对 Spring6 进行了正式版发布。</p>
<h4 id="11-1-3、Native-Image"><a href="#11-1-3、Native-Image" class="headerlink" title="11.1.3、Native Image"></a>11.1.3、Native Image</h4><p>目前业界除了这种在JVM中进行AOT的方案，还有另外一种实现Java AOT的思路，那就是直接摒弃JVM，和C&#x2F;C++一样通过编译器直接将代码编译成机器代码，然后运行。这无疑是一种直接颠覆Java语言设计的思路，那就是GraalVM Native Image。它通过C语言实现了一个超微缩的运行时组件 —— Substrate VM，基本实现了JVM的各种特性，但足够轻量、可以被轻松内嵌，这就让Java语言和工程摆脱JVM的限制，能够真正意义上实现和C&#x2F;C++一样的AOT编译。这一方案在经过长时间的优化和积累后，已经拥有非常不错的效果，基本上成为Oracle官方首推的Java AOT解决方案。<br>Native Image 是一项创新技术，可将 Java 代码编译成独立的本机可执行文件或本机共享库。在构建本机可执行文件期间处理的 Java 字节码包括所有应用程序类、依赖项、第三方依赖库和任何所需的 JDK 类。生成的自包含本机可执行文件特定于不需要 JVM 的每个单独的操作系统和机器体系结构。</p>
<h3 id="11-2、演示Native-Image构建过程"><a href="#11-2、演示Native-Image构建过程" class="headerlink" title="11.2、演示Native Image构建过程"></a>11.2、演示Native Image构建过程</h3><h4 id="11-2-1、GraalVM安装"><a href="#11-2-1、GraalVM安装" class="headerlink" title="11.2.1、GraalVM安装"></a>11.2.1、GraalVM安装</h4><h5 id="（1）下载GraalVM"><a href="#（1）下载GraalVM" class="headerlink" title="（1）下载GraalVM"></a>（1）下载GraalVM</h5><p>进入官网下载：<a target="_blank" rel="noopener" href="https://www.graalvm.org/downloads/">https://www.graalvm.org/downloads/</a><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048367.png" alt="image-20221207153944132" data-caption="image-20221207153944132" loading="lazy"><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048924.png" alt="image-20221207152841304" data-caption="image-20221207152841304" loading="lazy"></p>
<h5 id="（2）配置环境变量"><a href="#（2）配置环境变量" class="headerlink" title="（2）配置环境变量"></a>（2）配置环境变量</h5><p><strong>添加GRAALVM_HOME</strong><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048933.png" alt="image-20221207110539954" data-caption="image-20221207110539954" loading="lazy"><br><strong>把JAVA_HOME修改为graalvm的位置</strong><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048943.png" alt="image-20221207153724340" data-caption="image-20221207153724340" loading="lazy"><br><strong>把Path修改位graalvm的bin位置</strong><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048946.png" alt="image-20221207153755732" data-caption="image-20221207153755732" loading="lazy"><br><strong>使用命令查看是否安装成功</strong><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048964.png" alt="image-20221207153642253" data-caption="image-20221207153642253" loading="lazy"></p>
<h5 id="（3）安装native-image插件"><a href="#（3）安装native-image插件" class="headerlink" title="（3）安装native-image插件"></a>（3）安装native-image插件</h5><p><strong>使用命令 gu install native-image下载安装</strong><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048010.png" alt="image-20221207155009832" data-caption="image-20221207155009832" loading="lazy"></p>
<h4 id="11-2-2、安装C-的编译环境"><a href="#11-2-2、安装C-的编译环境" class="headerlink" title="11.2.2、安装C++的编译环境"></a>11.2.2、安装C++的编译环境</h4><h5 id="（1）下载Visual-Studio安装软件"><a href="#（1）下载Visual-Studio安装软件" class="headerlink" title="（1）下载Visual Studio安装软件"></a>（1）下载Visual Studio安装软件</h5><p><a target="_blank" rel="noopener" href="https://visualstudio.microsoft.com/zh-hans/downloads/">https://visualstudio.microsoft.com/zh-hans/downloads/</a><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048496.png" alt="image-20221219112426052" data-caption="image-20221219112426052" loading="lazy"></p>
<h5 id="（2）安装Visual-Studio"><a href="#（2）安装Visual-Studio" class="headerlink" title="（2）安装Visual Studio"></a>（2）安装Visual Studio</h5><p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048493.png" alt="image-20221207155726572" data-caption="image-20221207155726572" loading="lazy"><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048516.png" alt="image-20221207155756512" data-caption="image-20221207155756512" loading="lazy"></p>
<h5 id="（3）添加Visual-Studio环境变量"><a href="#（3）添加Visual-Studio环境变量" class="headerlink" title="（3）添加Visual Studio环境变量"></a>（3）添加Visual Studio环境变量</h5><p>配置INCLUDE、LIB和Path<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048521.png" alt="image-20221207110947997" data-caption="image-20221207110947997" loading="lazy"><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048535.png" alt="image-20221207111012582" data-caption="image-20221207111012582" loading="lazy"><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048545.png" alt="image-20221207111105569" data-caption="image-20221207111105569" loading="lazy"></p>
<h5 id="（4）打开工具，在工具中操作"><a href="#（4）打开工具，在工具中操作" class="headerlink" title="（4）打开工具，在工具中操作"></a>（4）打开工具，在工具中操作</h5><p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048484.png" alt="image-20221207111206279" data-caption="image-20221207111206279" loading="lazy"></p>
<h4 id="11-2-3、编写代码，构建Native-Image"><a href="#11-2-3、编写代码，构建Native-Image" class="headerlink" title="11.2.3、编写代码，构建Native Image"></a>11.2.3、编写代码，构建Native Image</h4><h5 id="（1）编写Java代码"><a href="#（1）编写Java代码" class="headerlink" title="（1）编写Java代码"></a>（1）编写Java代码</h5><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Hello</span> &#123;<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    System.out.println(<span class="hljs-string">&quot;hello world&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h5 id="（2）复制文件到目录，执行编译"><a href="#（2）复制文件到目录，执行编译" class="headerlink" title="（2）复制文件到目录，执行编译"></a>（2）复制文件到目录，执行编译</h5><p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048482.png" alt="image-20221207111420056" data-caption="image-20221207111420056" loading="lazy"></p>
<h5 id="（3）Native-Image-进行构建"><a href="#（3）Native-Image-进行构建" class="headerlink" title="（3）Native Image 进行构建"></a>（3）Native Image 进行构建</h5><p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048499.png" alt="image-20221207111509837" data-caption="image-20221207111509837" loading="lazy"><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048512.png" alt="image-20221207111609878" data-caption="image-20221207111609878" loading="lazy"></p>
<h5 id="（4）查看构建的文件"><a href="#（4）查看构建的文件" class="headerlink" title="（4）查看构建的文件"></a>（4）查看构建的文件</h5><p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048087.png" alt="image-20221207111644950" data-caption="image-20221207111644950" loading="lazy"></p>
<h5 id="（5）执行构建的文件"><a href="#（5）执行构建的文件" class="headerlink" title="（5）执行构建的文件"></a>（5）执行构建的文件</h5><p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048109.png" alt="image-20221207111731150" data-caption="image-20221207111731150" loading="lazy"><br>可以看到这个Hello最终打包产出的二进制文件大小为11M，这是包含了SVM和JDK各种库后的大小，虽然相比C&#x2F;C++的二进制文件来说体积偏大，但是对比完整JVM来说，可以说是已经是非常小了。<br>相比于使用JVM运行，Native Image的速度要快上不少，cpu占用也更低一些，从官方提供的各类实验数据也可以看出Native Image对于启动速度和内存占用带来的提升是非常显著的：<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048122.png" alt="image-20221207111947283" data-caption="image-20221207111947283" loading="lazy"><br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112048125.png" alt="image-20221207112009852" data-caption="image-20221207112009852" loading="lazy"></p>
<blockquote>
<p>如果报错如下<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112219840.png" alt="image-20230411221933712" data-caption="image-20230411221933712" loading="lazy"><br><code>原因，权限不够，以管理员权限启动即可</code><br>环境配置</p>
<p>如果想像这样添加多行，那么在添加第一行的时候，加一个英文的分号，即 ;<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112220560.png" alt="image-20230411222039492" data-caption="image-20230411222039492" loading="lazy"></p>
</blockquote>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">INCLUDE</span><br><span class="hljs-attribute">D</span>:\Microsoft Visual Studio\<span class="hljs-number">2022</span>\Community\VC\Tools\MSVC\<span class="hljs-number">14</span>.<span class="hljs-number">35</span>.<span class="hljs-number">32215</span>\bin\Hostx64\x64<br><span class="hljs-attribute">C</span>:\Program Files (x86)\Windows Kits\<span class="hljs-number">10</span>\Include\<span class="hljs-number">10</span>.<span class="hljs-number">0</span>.<span class="hljs-number">22000</span>.<span class="hljs-number">0</span>\ucrt<br><span class="hljs-attribute">C</span>:\Program Files (x86)\Windows Kits\<span class="hljs-number">10</span>\Include\<span class="hljs-number">10</span>.<span class="hljs-number">0</span>.<span class="hljs-number">22000</span>.<span class="hljs-number">0</span>\um<br><span class="hljs-attribute">C</span>:\Program Files (x86)\Windows Kits\<span class="hljs-number">10</span>\Include\<span class="hljs-number">10</span>.<span class="hljs-number">0</span>.<span class="hljs-number">22000</span>.<span class="hljs-number">0</span>\shared<br></code></pre></td></tr></table></figure>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112221435.png" alt="image-20230411222158372" data-caption="image-20230411222158372" loading="lazy"></p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">LIB</span><br><span class="hljs-attribute">C</span>:\Program Files (x86)\Windows Kits\<span class="hljs-number">10</span>\Include\<span class="hljs-number">10</span>.<span class="hljs-number">0</span>.<span class="hljs-number">22000</span>.<span class="hljs-number">0</span>\um\x64<br><span class="hljs-attribute">C</span>:\Program Files (x86)\Windows Kits\<span class="hljs-number">10</span>\Include\<span class="hljs-number">10</span>.<span class="hljs-number">0</span>.<span class="hljs-number">22000</span>.<span class="hljs-number">0</span>\ucrt\<span class="hljs-number">64</span><br><span class="hljs-attribute">D</span>:\Microsoft Visual Studio\<span class="hljs-number">2022</span>\Community\VC\Tools\MSVC\<span class="hljs-number">14</span>.<span class="hljs-number">35</span>.<span class="hljs-number">32215</span>\bin\Hostx64\x64<br></code></pre></td></tr></table></figure>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo01/202304112223251.png" alt="image-20230411222305184" data-caption="image-20230411222305184" loading="lazy"></p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">path</span><br><span class="hljs-attribute">D</span>:\Microsoft Visual Studio\<span class="hljs-number">2022</span>\Community\VC\Tools\MSVC\<span class="hljs-number">14</span>.<span class="hljs-number">35</span>.<span class="hljs-number">32215</span>\bin\Hostx64\x64<br></code></pre></td></tr></table></figure>
<p><strong>java环境变量</strong></p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><code class="hljs mathematica">从<span class="hljs-built_in">D</span><span class="hljs-operator">:</span>\<span class="hljs-variable">java</span>\<span class="hljs-variable">jdk</span>改为<span class="hljs-built_in">D</span><span class="hljs-operator">:</span>\<span class="hljs-variable">graalvm</span><span class="hljs-operator">-</span><span class="hljs-variable">ce</span><span class="hljs-operator">-</span><span class="hljs-variable">java17</span><span class="hljs-operator">-</span><span class="hljs-number">22.3</span><span class="hljs-number">.0</span><br></code></pre></td></tr></table></figure>

    
  </article>

  
      

  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
   
    
        <a class="nexmoefont icon-tag-fill -none-link" href="/tags/Spring6/" rel="tag">Spring6</a>
    
</div>
  
  

  
      <div class="nexmoe-post-footer">
          <script src="https://giscus.app/client.js"
    data-repo="nexmoe/nexmoe.com"
    data-repo-id="R_kgDOJI1XUA"
    data-category="General"
    data-category-id="DIC_kwDOJI1XUM4CU1nn"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="preferred_color_scheme"
    data-lang="en"
    data-loading="lazy"
    crossorigin="anonymous"
    async>
</script>

      </div>
  
</div>
</div>
        <div class="nexmoe-post-right">
              <div class="nexmoe-fixed">
                  <div class="nexmoe-tool"> 
                    
                      
                        
                          
                          
                              <button class="mdui-fab catalog" style="overflow:unset;">
                                  <i class="nexmoefont icon-i-catalog"></i>
                                  <div class="nexmoe-toc">
                                      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#AOT%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.</span> <span class="toc-text">AOT学习</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#AOT%E5%AD%A6%E4%B9%A0-1"><span class="toc-number">1.1.</span> <span class="toc-text">AOT学习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JIT"><span class="toc-number">1.1.1.</span> <span class="toc-text">JIT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AOT"><span class="toc-number">1.1.2.</span> <span class="toc-text">AOT</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#11-1-1%E3%80%81JIT%E4%B8%8EAOT%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">11.1.1、JIT与AOT的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-1-2%E3%80%81Graalvm"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">11.1.2、Graalvm</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-1-3%E3%80%81Native-Image"><span class="toc-number">1.1.2.3.</span> <span class="toc-text">11.1.3、Native Image</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2%E3%80%81%E6%BC%94%E7%A4%BANative-Image%E6%9E%84%E5%BB%BA%E8%BF%87%E7%A8%8B"><span class="toc-number">1.1.3.</span> <span class="toc-text">11.2、演示Native Image构建过程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#11-2-1%E3%80%81GraalVM%E5%AE%89%E8%A3%85"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">11.2.1、GraalVM安装</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E4%B8%8B%E8%BD%BDGraalVM"><span class="toc-number">1.1.3.1.1.</span> <span class="toc-text">（1）下载GraalVM</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">1.1.3.1.2.</span> <span class="toc-text">（2）配置环境变量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E5%AE%89%E8%A3%85native-image%E6%8F%92%E4%BB%B6"><span class="toc-number">1.1.3.1.3.</span> <span class="toc-text">（3）安装native-image插件</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-2-2%E3%80%81%E5%AE%89%E8%A3%85C-%E7%9A%84%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">11.2.2、安装C++的编译环境</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E4%B8%8B%E8%BD%BDVisual-Studio%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6"><span class="toc-number">1.1.3.2.1.</span> <span class="toc-text">（1）下载Visual Studio安装软件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%AE%89%E8%A3%85Visual-Studio"><span class="toc-number">1.1.3.2.2.</span> <span class="toc-text">（2）安装Visual Studio</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%B7%BB%E5%8A%A0Visual-Studio%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">1.1.3.2.3.</span> <span class="toc-text">（3）添加Visual Studio环境变量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E6%89%93%E5%BC%80%E5%B7%A5%E5%85%B7%EF%BC%8C%E5%9C%A8%E5%B7%A5%E5%85%B7%E4%B8%AD%E6%93%8D%E4%BD%9C"><span class="toc-number">1.1.3.2.4.</span> <span class="toc-text">（4）打开工具，在工具中操作</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-2-3%E3%80%81%E7%BC%96%E5%86%99%E4%BB%A3%E7%A0%81%EF%BC%8C%E6%9E%84%E5%BB%BANative-Image"><span class="toc-number">1.1.3.3.</span> <span class="toc-text">11.2.3、编写代码，构建Native Image</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E7%BC%96%E5%86%99Java%E4%BB%A3%E7%A0%81"><span class="toc-number">1.1.3.3.1.</span> <span class="toc-text">（1）编写Java代码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6%E5%88%B0%E7%9B%AE%E5%BD%95%EF%BC%8C%E6%89%A7%E8%A1%8C%E7%BC%96%E8%AF%91"><span class="toc-number">1.1.3.3.2.</span> <span class="toc-text">（2）复制文件到目录，执行编译</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%883%EF%BC%89Native-Image-%E8%BF%9B%E8%A1%8C%E6%9E%84%E5%BB%BA"><span class="toc-number">1.1.3.3.3.</span> <span class="toc-text">（3）Native Image 进行构建</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E6%9F%A5%E7%9C%8B%E6%9E%84%E5%BB%BA%E7%9A%84%E6%96%87%E4%BB%B6"><span class="toc-number">1.1.3.3.4.</span> <span class="toc-text">（4）查看构建的文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E6%89%A7%E8%A1%8C%E6%9E%84%E5%BB%BA%E7%9A%84%E6%96%87%E4%BB%B6"><span class="toc-number">1.1.3.3.5.</span> <span class="toc-text">（5）执行构建的文件</span></a></li></ol></li></ol></li></ol></li></ol></li></ol>
                                  </div>
                              </button>
                          
                          
                      
                    
                      <a href="#nexmoe-content" class="toc-link" aria-label="Back To Top" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
                  </div>
              </div>
            </div>
    </div>
    <div id="nexmoe-search-space">
	<div class="search-container">
		<div class="search-header">
			<div class="search-input-container">
				<input
					class="search-input"
					type="text"
					placeholder="搜索"
					oninput="sinput();"
				/>
			</div>
			<a class="search-close" onclick="sclose();">×</a>
		</div>
		<div class="search-body"></div>
	</div>
</div>

    
    
</body>

</html>
