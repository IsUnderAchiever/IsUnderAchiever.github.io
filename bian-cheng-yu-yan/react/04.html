<!DOCTYPE html>

<html lang="zh-CN">

<head>
    
    <title>04.Redux - 折影轻梦</title>
    <meta charset="UTF-8">
    <meta name="keywords" content="折影轻梦,Mixcm,轻惋,觅漫者,小舒同学,Xiaoshu,Nexmoe,产品,Meteor,探索者小舒,伴学OS1,Theme,Design,Product">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
    <meta name="description" content="Redux介绍Redux是React中使用广泛的集中状态管理工具  类比vuex之于vue 同类的工具还有mobx等为什么要使用Redux？  独立于组件，无视组件之间的层级关系，简化通信问题 单项数据流清晰，易于定位bug 调试工具配套良好，方便调试  Redux快速体验1. Redux数据流架构Redux的难点是理解它对于数据修改的规则, 下图动态展示了在整个数据的修改中，数据的流向为了职责清">
<meta property="og:type" content="article">
<meta property="og:title" content="04.Redux">
<meta property="og:url" content="https://isunderachiever.github.io/bian-cheng-yu-yan/react/04.html">
<meta property="og:site_name" content="折影轻梦">
<meta property="og:description" content="Redux介绍Redux是React中使用广泛的集中状态管理工具  类比vuex之于vue 同类的工具还有mobx等为什么要使用Redux？  独立于组件，无视组件之间的层级关系，简化通信问题 单项数据流清晰，易于定位bug 调试工具配套良好，方便调试  Redux快速体验1. Redux数据流架构Redux的难点是理解它对于数据修改的规则, 下图动态展示了在整个数据的修改中，数据的流向为了职责清">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/tongstyle/markdown-img/raw/master/202307132139731.png">
<meta property="og:image" content="https://gitee.com/tongstyle/markdown-img/raw/master/202307132139992.png">
<meta property="og:image" content="https://gitee.com/tongstyle/markdown-img/raw/master/202307132140463.png">
<meta property="article:published_time" content="2023-06-03T16:00:00.000Z">
<meta property="article:modified_time" content="2024-06-01T14:12:25.020Z">
<meta property="article:author" content="折影轻梦">
<meta property="article:tag" content="React">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/tongstyle/markdown-img/raw/master/202307132139731.png">
    
<link rel="stylesheet" href="/lib/fancybox/fancybox.css">
<link rel="stylesheet" href="/lib/mdui_043tiny/mdui.css">


    <link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1717340472288">
    
    <link rel="stylesheet" href="/css/style.css?v=1717340472288">

    
        
            <link rel="stylesheet" href="/custom.css?v=1717340472288">
        
    

    
<script src="/lib/mdui_043tiny/mdui.js" async></script>
<script src="/lib/fancybox/fancybox.umd.js" async></script>


    <script async src="/js/app.js?v=1717340472288"></script>
    
     

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4D4ZJ9G024"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag("js", new Date());

  gtag("config", "G-4D4ZJ9G024");
</script>

<meta name="generator" content="Hexo 6.3.0"></head>

<body class="mdui-drawer-body-left">
    <div id="nexmoe-background">
        <div class="nexmoe-bg" 
            style="background-image: url(https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102206.jpg)"
        ></div>
        <div class="mdui-appbar mdui-shadow-0">
            <div class="mdui-toolbar">
                <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
                <div class="mdui-toolbar-spacer"></div>
                <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
                <a href="/" title="折影轻梦" class="mdui-btn mdui-btn-icon"><img src="https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102017.jpg" alt="折影轻梦"></a>
            </div>
        </div>
    </div>
    <div id="nexmoe-header">
        <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="折影轻梦">
            <img src="https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102017.jpg" alt="折影轻梦" alt="折影轻梦">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>169</div>
        <div><span>标签</span>62</div>
        <div><span>分类</span>63</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/archive.html" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/life.html" title="我的生活">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的生活
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/about.html" title="关于博主">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博主
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
        
            
            <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
        
            <form id="search_form">
                <label><input class="st-default-search-input" id="search_value" name="q" type="search" placeholder="搜索" style="
                    font-size: 15px !important;
                    height: 56px !important;
                    background-image: none;
                "></label>
            </form>
         
    </div>
</div>


	<script async src="/js/search.js?v=1717340472288"></script>



        
            
            <div class="nexmoe-widget-wrap">
	<div class="nexmoe-widget nexmoe-social">
		<a
			class="mdui-ripple"
			href="https://github.com/IsUnderAchiever/"
			target="_blank"
			mdui-tooltip="{content: 'QQ群'}"
			style="
				color: rgb(249, 174, 8);
				background-color: rgba(249, 174, 8, .1);
			"
		>
			<i
				class="nexmoefont icon-QQ"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://space.bilibili.com/477448861/"
			target="_blank"
			mdui-tooltip="{content: '哔哩哔哩'}"
			style="
				color: rgb(231, 106, 141);
				background-color: rgba(231, 106, 141, .1);
			"
		>
			<i
				class="nexmoefont icon-bilibili"
			></i> </a
		>
	</div>
</div>

        
            
            
            
            
            
            
    </aside>
    <div class="nexmoe-copyright">
        &copy; 2024 折影轻梦
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        
    </div>
</div><!-- .nexmoe-drawer -->
    </div>
    <div id="nexmoe-content">
        <div class="nexmoe-primary">
    <div class="nexmoe-post">
  <article>
    
        <div class="nexmoe-post-cover"> 
            <img src="https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102206.jpg" alt="04.Redux" loading="lazy">
            <h1>04.Redux</h1>
        </div>
    
    
    <div class="nexmoe-post-meta">
    <div class="nexmoe-rainbow">
        <a class="nexmoefont icon-calendar-fill">2023年06月04日</a>
        
            <a class="nexmoefont icon-appstore-fill -link" href="/categories/React/">React</a>
        
        
    </div>
    
    
    
    
    
</div>

    <h1 id="Redux介绍"><a href="#Redux介绍" class="headerlink" title="Redux介绍"></a>Redux介绍</h1><p>Redux是React中使用广泛的集中状态管理工具  类比vuex之于vue 同类的工具还有mobx等<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/markdown-img/raw/master/202307132139731.png" alt="img" data-caption="img" loading="lazy"><br><strong>为什么要使用Redux？</strong></p>
<ol>
<li>独立于组件，无视组件之间的层级关系，简化通信问题</li>
<li>单项数据流清晰，易于定位bug</li>
<li>调试工具配套良好，方便调试</li>
</ol>
<h1 id="Redux快速体验"><a href="#Redux快速体验" class="headerlink" title="Redux快速体验"></a>Redux快速体验</h1><h2 id="1-Redux数据流架构"><a href="#1-Redux数据流架构" class="headerlink" title="1. Redux数据流架构"></a>1. Redux数据流架构</h2><p>Redux的难点是理解它对于数据修改的规则, 下图动态展示了在整个数据的修改中，数据的流向<br><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/markdown-img/raw/master/202307132139992.png" alt="img" data-caption="img" loading="lazy"><br>为了职责清晰，Redux代码被分为三个核心的概念，我们学redux，其实就是学这三个核心概念之间的配合，三个概念分别是:</p>
<ol>
<li>state:  一个对象 存放着我们管理的数据</li>
<li>action:  一个对象 用来描述你想怎么改数据</li>
<li>reducer:  一个函数 根据action的描述更新state</li>
</ol>
<h2 id="2-纯Redux实现计数器"><a href="#2-纯Redux实现计数器" class="headerlink" title="2. 纯Redux实现计数器"></a>2. 纯Redux实现计数器</h2><p>核心步骤</p>
<ol>
<li>创建reducer函数 在内部定义好action和state的定义关系</li>
<li>调用Redux的createStore方法传入定义好的reducer函数生成store实例</li>
<li>通过store实例身上的subscribe方法监控数据是否变化</li>
<li>点击按钮 通过专门的dispatch函数 提交action对象 实现数据更新<figure class="highlight html"><table><tr><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;decrement&quot;</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;increment&quot;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/redux@latest/dist/redux.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// 定义reducer函数 </span></span><br><span class="language-javascript">  <span class="hljs-comment">// 内部主要的工作是根据不同的action 返回不同的state</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">counterReducer</span> (state = &#123; <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> &#125;, action) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;INCREMENT&#x27;</span>:</span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">count</span>: state.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> &#125;</span><br><span class="language-javascript">      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;DECREMENT&#x27;</span>:</span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">count</span>: state.<span class="hljs-property">count</span> - <span class="hljs-number">1</span> &#125;</span><br><span class="language-javascript">      <span class="hljs-attr">default</span>:</span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> state</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">  <span class="hljs-comment">// 使用reducer函数生成store实例</span></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> store = <span class="hljs-title class_">Redux</span>.<span class="hljs-title function_">createStore</span>(counterReducer)</span><br><span class="language-javascript">  </span><br><span class="language-javascript">  <span class="hljs-comment">// 订阅数据变化</span></span><br><span class="language-javascript">  store.<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(store.<span class="hljs-title function_">getState</span>())</span><br><span class="language-javascript">    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;count&#x27;</span>).<span class="hljs-property">innerText</span> = store.<span class="hljs-title function_">getState</span>().<span class="hljs-property">count</span></span><br><span class="language-javascript">    </span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript">  <span class="hljs-comment">// 增</span></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> inBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;increment&#x27;</span>)</span><br><span class="language-javascript">  inBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    store.<span class="hljs-title function_">dispatch</span>(&#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;INCREMENT&#x27;</span></span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript">  <span class="hljs-comment">// 减</span></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> dBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;decrement&#x27;</span>)</span><br><span class="language-javascript">  dBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    store.<span class="hljs-title function_">dispatch</span>(&#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;DECREMENT&#x27;</span></span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li>
</ol>
<h1 id="Redux与React"><a href="#Redux与React" class="headerlink" title="Redux与React"></a>Redux与React</h1><p>Redux虽然是一个框架无关可以独立运行的插件，但是社区通常还是把它与React绑定在一起使用，以一个计数器案例体验一下Redux + React 的基础使用</p>
<h2 id="1-开发环境准备"><a href="#1-开发环境准备" class="headerlink" title="1. 开发环境准备"></a>1. 开发环境准备</h2><p>使用create-react-app创建react基础项目，并安装Redux相关工具</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 创建项目</span><br>$ yarn create vite react-redux --template react<br><span class="hljs-comment"># 安装redux配套工具</span><br>$ yarn add  @reduxjs/toolkit react-redux<br><span class="hljs-comment"># 启动项目</span><br>$ yarn dev<br></code></pre></td></tr></table></figure>
<p>目录核心结构</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plain">src<br>  - store<br>    - modules  // 模块store<br>    - index.js // 组合模块的入口文件<br>  - App.js<br></code></pre></td></tr></table></figure>
<h2 id="2-创建counterStore"><a href="#2-创建counterStore" class="headerlink" title="2. 创建counterStore"></a>2. 创建counterStore</h2><p>创建store的的核心步骤分为两步</p>
<ol>
<li>使用toolkit的<strong>createSlice</strong>方法创建一个独立的子模块</li>
<li>使用<strong>configureStore</strong>语法组合子模块<br>1- 创建子模块<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createSlice &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@reduxjs/toolkit&#x27;</span><br><span class="hljs-keyword">const</span> counter = <span class="hljs-title function_">createSlice</span>(&#123;<br>  <span class="hljs-comment">// 模块名称独一无二</span><br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;counter&#x27;</span>,<br>  <span class="hljs-comment">// 初始数据</span><br>  <span class="hljs-attr">initialState</span>: &#123;<br>    <span class="hljs-attr">count</span>: <span class="hljs-number">1</span><br>  &#125;,<br>  <span class="hljs-comment">// 修改数据的同步方法</span><br>  <span class="hljs-attr">reducers</span>: &#123;<br>    add (state) &#123;<br>      state.<span class="hljs-property">count</span>++<br>    &#125;<br>  &#125;<br>&#125;)<br><span class="hljs-keyword">const</span> &#123; add &#125; = counter.<span class="hljs-property">actions</span><br><span class="hljs-keyword">const</span> counterReducer = counter.<span class="hljs-property">reducer</span><br><span class="hljs-comment">// 导出修改数据的函数</span><br><span class="hljs-keyword">export</span> &#123; add &#125;<br><span class="hljs-comment">// 导出reducer</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> counterReducer<br></code></pre></td></tr></table></figure>
2- 组合子模块<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; configureStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@reduxjs/toolkit&#x27;</span><br><span class="hljs-keyword">import</span> counterReducer <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./counterStore&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">configureStore</span>(&#123;<br>  <span class="hljs-attr">reducer</span>: &#123;<br>    <span class="hljs-comment">// 注册子模块</span><br>    <span class="hljs-attr">counter</span>: counterReducer<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure></li>
</ol>
<h2 id="3-为React提供Redux-store"><a href="#3-为React提供Redux-store" class="headerlink" title="3. 为React提供Redux store"></a>3. 为React提供Redux store</h2><p>要想让所有的组件都有资格访问store中的数据，需要我们在入口文件中，渲染根组件的位置通过Provider提供store数据</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-dom/client&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App&#x27;</span><br><span class="hljs-comment">// 导入store</span><br><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./store&#x27;</span><br><span class="hljs-comment">// 导入store提供组件Provider</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Provider</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-redux&#x27;</span><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>)).<span class="hljs-title function_">render</span>(<br>  <span class="hljs-comment">// 提供store数据</span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">&#123;store&#125;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span><br>)<br></code></pre></td></tr></table></figure>
<h2 id="4-组件使用store中的数据"><a href="#4-组件使用store中的数据" class="headerlink" title="4. 组件使用store中的数据"></a>4. 组件使用store中的数据</h2><p>组件使用store中的数据需要借助一个hook方法，叫做useSelector<br>useSelector(state &#x3D;&gt; state.模块名)  方法的返回值为一个对象，对象中包含store子模块中的所有数据</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useSelector &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-redux&#x27;</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span> () &#123;<br>  <span class="hljs-comment">// 使用数据</span><br>  <span class="hljs-keyword">const</span> &#123; count &#125; = <span class="hljs-title function_">useSelector</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">counter</span>)<br>  <br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      &#123;count&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;clickHandler&#125;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>
<h2 id="5-组件修改store中的数据"><a href="#5-组件修改store中的数据" class="headerlink" title="5. 组件修改store中的数据"></a>5. 组件修改store中的数据</h2><p>修改store中的数据有俩个核心步骤</p>
<ol>
<li>使用counterStore模块中导出的add方法创建action对象</li>
<li>通过dispatch函数以action作为参数传入完成数据更新<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useSelector, useDispatch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-redux&#x27;</span><br><span class="hljs-keyword">import</span> &#123; add &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./store/counterStore&#x27;</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span> () &#123;<br>  <span class="hljs-comment">// 使用数据</span><br>  <span class="hljs-keyword">const</span> &#123; count &#125; = <span class="hljs-title function_">useSelector</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">counter</span>)<br>  <span class="hljs-comment">// 修改数据</span><br>  <span class="hljs-keyword">const</span> dispatch = <span class="hljs-title function_">useDispatch</span>()<br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">clickHandler</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-comment">// 1. 生成action对象</span><br>    <span class="hljs-keyword">const</span> action = <span class="hljs-title function_">add</span>()<br>    <span class="hljs-comment">// 2. 提交action进行数据更新</span><br>    <span class="hljs-title function_">dispatch</span>(action)<br>  &#125;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      &#123;count&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;clickHandler&#125;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure></li>
</ol>
<h2 id="6-组件修改数据并传参"><a href="#6-组件修改数据并传参" class="headerlink" title="6. 组件修改数据并传参"></a>6. 组件修改数据并传参</h2><p>上一小节通过dispatch函数提交action修改了数据，如果在提交的时候需要传参怎么做呢<br>1- 修改数据的方法中补充第二个参数action</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createSlice &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@reduxjs/toolkit&quot;</span><br><span class="hljs-keyword">const</span> counterStore = <span class="hljs-title function_">createSlice</span>(&#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;counter&#x27;</span>, <span class="hljs-comment">// 独一无二不重复的名字语义化</span><br>  <span class="hljs-comment">// 定义初始化的数据</span><br>  <span class="hljs-attr">initialState</span>: &#123;<br>    <span class="hljs-attr">taskList</span>: [<span class="hljs-string">&#x27;react&#x27;</span>]<br>  &#125;,<br>  <span class="hljs-attr">reducers</span>: &#123;<br>    <span class="hljs-comment">// action为一个对象 对象中有一个固定的属性叫做payload 为传递过来的参数</span><br>    addTaskList (state, action) &#123;<br>      state.<span class="hljs-property">taskList</span>.<span class="hljs-title function_">push</span>(action.<span class="hljs-property">payload</span>)<br>    &#125;<br>  &#125;<br>&#125;)<br><span class="hljs-comment">// 生成修改数据的方法导出</span><br><span class="hljs-keyword">const</span> &#123; addTaskList &#125; = counterStore.<span class="hljs-property">actions</span><br><span class="hljs-keyword">export</span> &#123; addTaskList &#125;<br><span class="hljs-comment">// 生成reducer 导出 供index.js做组合模块</span><br><span class="hljs-keyword">const</span> counterReducer = counterStore.<span class="hljs-property">reducer</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> counterReducer<br></code></pre></td></tr></table></figure>
<p>2- dispatch的时候传入实参</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx">&lt;button onClick=&#123;<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-title function_">addTaskList</span>(<span class="hljs-string">&#x27;vue&#x27;</span>))&#125;&gt;addList&lt;/button&gt;<br></code></pre></td></tr></table></figure>
<h2 id="7-Redux异步处理"><a href="#7-Redux异步处理" class="headerlink" title="7. Redux异步处理"></a>7. Redux异步处理</h2><p>测试接口地址：  <a target="_blank" rel="noopener" href="http://geek.itheima.net/v1_0/channels'">http://geek.itheima.net/v1_0&#x2F;channels</a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createSlice &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@reduxjs/toolkit&#x27;</span><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><span class="hljs-keyword">const</span> channelStore = <span class="hljs-title function_">createSlice</span>(&#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;channel&#x27;</span>,<br>  <span class="hljs-attr">initialState</span>: &#123;<br>    <span class="hljs-attr">channelList</span>: []<br>  &#125;,<br>  <span class="hljs-attr">reducers</span>: &#123;<br>    setChannelList (state, action) &#123;<br>      state.<span class="hljs-property">channelList</span> = action.<span class="hljs-property">payload</span><br>    &#125;<br>  &#125;<br>&#125;)<br><span class="hljs-comment">// 创建异步</span><br><span class="hljs-keyword">const</span> &#123; setChannelList &#125; = channelStore.<span class="hljs-property">actions</span><br><span class="hljs-keyword">const</span> url = <span class="hljs-string">&#x27;http://geek.itheima.net/v1_0/channels&#x27;</span><br><span class="hljs-comment">// 封装一个函数 在函数中return一个新函数 在新函数中封装异步</span><br><span class="hljs-comment">// 得到数据之后通过dispatch函数 触发修改</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchChannelList</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> (dispatch) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(url)<br>    <span class="hljs-title function_">dispatch</span>(<span class="hljs-title function_">setChannelList</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">channels</span>))<br>  &#125;<br>&#125;<br><span class="hljs-keyword">export</span> &#123; fetchChannelList &#125;<br><span class="hljs-keyword">const</span> channelReducer = channelStore.<span class="hljs-property">reducer</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> channelReducer<br><span class="hljs-keyword">import</span> &#123; useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123; useSelector, useDispatch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-redux&#x27;</span><br><span class="hljs-keyword">import</span> &#123; fetchChannelList &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./store/channelStore&#x27;</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span> () &#123;<br>  <span class="hljs-comment">// 使用数据</span><br>  <span class="hljs-keyword">const</span> &#123; channelList &#125; = <span class="hljs-title function_">useSelector</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">channel</span>)<br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-title function_">dispatch</span>(<span class="hljs-title function_">fetchChannelList</span>())<br>  &#125;, [dispatch])<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        &#123;channelList.map(task =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;task.id&#125;</span>&gt;</span>&#123;task.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>)&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>
<h1 id="Todos综合案例"><a href="#Todos综合案例" class="headerlink" title="Todos综合案例"></a>Todos综合案例</h1><p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/tongstyle/markdown-img/raw/master/202307132140463.png" alt="img" data-caption="img" loading="lazy"></p>
<h2 id="1-准备开发环境"><a href="#1-准备开发环境" class="headerlink" title="1. 准备开发环境"></a>1. 准备开发环境</h2><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 克隆项目到本地</span><br>$ git <span class="hljs-built_in">clone</span> https://gitee.com/react-course-series/react-redux.git<br><span class="hljs-comment"># 安装所有依赖</span><br>$ yarn <br><span class="hljs-comment"># or </span><br>$ npm i<br></code></pre></td></tr></table></figure>
<h2 id="2-渲染列表"><a href="#2-渲染列表" class="headerlink" title="2. 渲染列表"></a>2. 渲染列表</h2><ol>
<li>在组件中通过核心方法 useSelector方法使用数据</li>
<li>使用map方法进行列表遍历<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// 导入useSelector方法</span><br><span class="hljs-keyword">import</span> &#123; useSelector &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-redux&#x27;</span><br><span class="hljs-comment">// 从store中获取list数据</span><br><span class="hljs-keyword">const</span> &#123; list &#125; = <span class="hljs-title function_">useSelector</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">taskStore</span>)<br><span class="hljs-comment">// 渲染列表</span><br>&lt;ul className=<span class="hljs-string">&quot;todo-list&quot;</span>&gt;<br>  &#123;list.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">task</span>) =&gt;</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;task.id&#125;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;task.done</span> ? &#x27;<span class="hljs-attr">completed</span> <span class="hljs-attr">todo</span>&#x27; <span class="hljs-attr">:</span> &#x27;<span class="hljs-attr">todo</span>&#x27;&#125;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;view&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;toggle&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">checked</span>=<span class="hljs-string">&#123;task.done&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> singleCheck(task.id, e)&#125;</span><br><span class="language-xml">        /&gt;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span> &#123;task.title&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;destroy&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> delTask(task.id)&#125;&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>  ))&#125;<br>&lt;/ul&gt;<br></code></pre></td></tr></table></figure></li>
</ol>
<h2 id="3-实现删除"><a href="#3-实现删除" class="headerlink" title="3. 实现删除"></a>3. 实现删除</h2><p>实现步骤：</p>
<ol>
<li>在store的reducers选项中定义修改数据的方法 然后导出</li>
<li>在组件中通过dispatch函数触发方法的执行并传入id参数<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">reducers</span>:&#123;<br>  <span class="hljs-comment">// 删除的方法</span><br>   delTask (state, action) &#123;<br>      state.<span class="hljs-property">list</span> = state.<span class="hljs-property">list</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">task</span> =&gt;</span> task.<span class="hljs-property">id</span> !== action.<span class="hljs-property">payload</span>)<br>   &#125;<br>&#125;<br><span class="hljs-comment">// 导出删除action函数</span><br><span class="hljs-comment">// 导出action函数</span><br><span class="hljs-keyword">const</span> &#123; delTask &#125; = taskStore.<span class="hljs-property">actions</span><br><span class="hljs-keyword">export</span> &#123; delTask &#125;<br><span class="hljs-comment">// 导入生成dispatch方法的hook</span><br><span class="hljs-keyword">import</span> &#123; useDispatch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-redux&#x27;</span><br><span class="hljs-comment">// 得到dispatch方法</span><br><span class="hljs-keyword">const</span> dispatch = <span class="hljs-title function_">useDispatch</span>()<br><span class="hljs-comment">// 通过dispatch函数调用action并传入id</span><br>&lt;button<br>  className=<span class="hljs-string">&quot;destroy&quot;</span><br>  onClick=&#123;<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-title function_">delTask</span>(task.<span class="hljs-property">id</span>))&#125;&gt;<br>&lt;/button&gt;<br></code></pre></td></tr></table></figure></li>
</ol>
<h2 id="4-切换单选状态"><a href="#4-切换单选状态" class="headerlink" title="4. 切换单选状态"></a>4. 切换单选状态</h2><p>实现步骤：</p>
<ol>
<li>在reducers选项中创建切换状态的函数，内部通过传入的id找到要修改的项 进行取反</li>
<li>组件中通过dispatch函数触发并传入id<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">reducers</span>:&#123;<br>  toggleTask (state, action) &#123;<br>    <span class="hljs-keyword">const</span> item = state.<span class="hljs-property">list</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">task</span> =&gt;</span> task.<span class="hljs-property">id</span> === action.<span class="hljs-property">payload</span>)<br>    item.<span class="hljs-property">done</span> = !item.<span class="hljs-property">done</span><br>  &#125;<br>&#125;<br><span class="hljs-comment">// 解构导出</span><br><span class="hljs-keyword">const</span> &#123; toggleTask &#125; = taskStore.<span class="hljs-property">actions</span><br><span class="hljs-comment">// 导出action函数</span><br><span class="hljs-keyword">export</span> &#123; toggleTask &#125;<br>&lt;input<br>  className=<span class="hljs-string">&quot;toggle&quot;</span><br>  type=<span class="hljs-string">&quot;checkbox&quot;</span><br>  checked=&#123;task.<span class="hljs-property">done</span>&#125;<br>  onChange=&#123;<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-title function_">toggleTask</span>(task.<span class="hljs-property">id</span>))&#125;<br>/&gt;<br></code></pre></td></tr></table></figure></li>
</ol>
<h2 id="5-切换全选状态"><a href="#5-切换全选状态" class="headerlink" title="5. 切换全选状态"></a>5. 切换全选状态</h2><p>实现思路：</p>
<ol>
<li>全选其实就是遍历数组中的所有项把每一项的done字段都改成true</li>
<li>反选其实就是遍历数组中的所有项把每一项的done字段都改成false</li>
<li>总之，done字段的值始终和当前全选框的状态决定<br>实现步骤：</li>
<li>在store中的reducers函数中定义修改数据的action函数控制done字段的变化</li>
<li>导出相应的action函数 供组件使用</li>
<li>组件中通过 checked属性控制是否全选的UI显示，在change事件中触发action<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">reducers</span>:&#123;<br>  <span class="hljs-comment">// 全选</span><br>  <span class="hljs-title function_">allCheck</span>(<span class="hljs-params">state, action</span>)&#123;<br>    state.<span class="hljs-property">list</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>item.<span class="hljs-property">done</span> = action.<span class="hljs-property">payload</span>)<br>  &#125;<br>&#125;<br><span class="hljs-comment">// 导出action函数</span><br><span class="hljs-keyword">const</span> &#123; allCheck &#125; = taskStore.<span class="hljs-property">actions</span><br><span class="hljs-keyword">export</span> &#123; allCheck &#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx">&lt;input<br>  id=<span class="hljs-string">&quot;toggle-all&quot;</span><br>  className=<span class="hljs-string">&quot;toggle-all&quot;</span><br>  type=<span class="hljs-string">&quot;checkbox&quot;</span><br>  checked=&#123;list.<span class="hljs-title function_">every</span>(<span class="hljs-function">(<span class="hljs-params">task</span>) =&gt;</span> task.<span class="hljs-property">done</span>)&#125;<br>  onChange=&#123;<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-title function_">allCheck</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">checked</span>))&#125;<br>/&gt;<br></code></pre></td></tr></table></figure></li>
</ol>
<h2 id="6-新增实现"><a href="#6-新增实现" class="headerlink" title="6. 新增实现"></a>6. 新增实现</h2><p>要求: 输入框中输入内容，用户在回车时可以实现添加功能<br>实现思路和步骤</p>
<ol>
<li>在redux中定义新增的方法 addTask</li>
<li>在组件中通过受控的方式 记录输入框中的数据</li>
<li>keyUp事件中判断当前是否点击的是enter[keyCode为13]  如果是通过dispatch执行修改<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 新增: 按照list中item的对象结构 传入一个新的对象 push到数组中</span><br><span class="hljs-attr">reducer</span>:&#123;<br>   addTask (state, action) &#123;<br>      state.<span class="hljs-property">taskList</span>.<span class="hljs-title function_">push</span>(action.<span class="hljs-property">payload</span>)<br>   &#125;<br>&#125;<br><span class="hljs-comment">// 1. 受控的方式存入用户输入数据  </span><br><span class="hljs-comment">// 2.keyUp 判断点击的是enter dispatch触发修改数据的函数</span><br><span class="hljs-keyword">const</span> [keyword, setKeyword] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">onChange</span> = (<span class="hljs-params">e</span>) =&gt; &#123;<br>  <span class="hljs-title function_">setKeyword</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>)<br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">onKeyUp</span> = (<span class="hljs-params">e</span>) =&gt; &#123;<br>  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">keyCode</span> === <span class="hljs-number">13</span>) &#123;<br>    <span class="hljs-title function_">dispatch</span>(<br>      <span class="hljs-title function_">addTask</span>(&#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>,<br>        <span class="hljs-attr">name</span>: keyword,<br>        <span class="hljs-attr">isDone</span>: <span class="hljs-literal">false</span>,<br>      &#125;)<br>    )<br>    <span class="hljs-title function_">setKeyword</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br>  &#125;<br>&#125;<br>&lt;input<br>  className=<span class="hljs-string">&quot;new-todo&quot;</span><br>  autoFocus<br>  autoComplete=<span class="hljs-string">&quot;off&quot;</span><br>  placeholder=<span class="hljs-string">&quot;What needs to be done?&quot;</span><br>  value=&#123;keyword&#125;<br>  onChange=&#123;onChange&#125;<br>  onKeyUp=&#123;onKeyUp&#125;<br>/&gt;<br></code></pre></td></tr></table></figure></li>
</ol>
<h1 id="美团小案例"><a href="#美团小案例" class="headerlink" title="美团小案例"></a>美团小案例</h1><h2 id="1-准备环境"><a href="#1-准备环境" class="headerlink" title="1. 准备环境"></a>1. 准备环境</h2><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 克隆项目到本地</span><br>git <span class="hljs-built_in">clone</span> http://git.itcast.cn/heimaqianduan/redux-meituan.git<br><span class="hljs-comment"># 安装所有依赖</span><br>npm i<br><span class="hljs-comment"># 启动mock服务</span><br>npm run serve<br><span class="hljs-comment"># 启动前端服务</span><br>npm run start<br></code></pre></td></tr></table></figure>

    
  </article>

  
      
    <div class="nexmoe-post-copyright">
        <strong>本文作者：</strong>折影轻梦<br>
        <strong>本文链接：</strong><a href="https://isunderachiever.github.io/bian-cheng-yu-yan/react/04.html" title="https:&#x2F;&#x2F;isunderachiever.github.io&#x2F;bian-cheng-yu-yan&#x2F;react&#x2F;04.html" target="_blank" rel="noopener">https:&#x2F;&#x2F;isunderachiever.github.io&#x2F;bian-cheng-yu-yan&#x2F;react&#x2F;04.html</a><br>
        
            <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可

        
    </div>


  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
   
    
        <a class="nexmoefont icon-tag-fill -none-link" href="/tags/React/" rel="tag">React</a>
    
</div>
  
  

  
      <div class="nexmoe-post-footer">
          <script src="https://giscus.app/client.js"
    data-repo="nexmoe/nexmoe.com"
    data-repo-id="R_kgDOJI1XUA"
    data-category="General"
    data-category-id="DIC_kwDOJI1XUM4CU1nn"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="preferred_color_scheme"
    data-lang="en"
    data-loading="lazy"
    crossorigin="anonymous"
    async>
</script>

      </div>
  
</div>
</div>
        <div class="nexmoe-post-right">
              <div class="nexmoe-fixed">
                  <div class="nexmoe-tool"> 
                    
                      
                        
                          
                          
                              <button class="mdui-fab catalog" style="overflow:unset;">
                                  <i class="nexmoefont icon-i-catalog"></i>
                                  <div class="nexmoe-toc">
                                      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Redux%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">Redux介绍</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Redux%E5%BF%AB%E9%80%9F%E4%BD%93%E9%AA%8C"><span class="toc-number">2.</span> <span class="toc-text">Redux快速体验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Redux%E6%95%B0%E6%8D%AE%E6%B5%81%E6%9E%B6%E6%9E%84"><span class="toc-number">2.1.</span> <span class="toc-text">1. Redux数据流架构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%BA%AFRedux%E5%AE%9E%E7%8E%B0%E8%AE%A1%E6%95%B0%E5%99%A8"><span class="toc-number">2.2.</span> <span class="toc-text">2. 纯Redux实现计数器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Redux%E4%B8%8EReact"><span class="toc-number">3.</span> <span class="toc-text">Redux与React</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="toc-number">3.1.</span> <span class="toc-text">1. 开发环境准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%88%9B%E5%BB%BAcounterStore"><span class="toc-number">3.2.</span> <span class="toc-text">2. 创建counterStore</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%B8%BAReact%E6%8F%90%E4%BE%9BRedux-store"><span class="toc-number">3.3.</span> <span class="toc-text">3. 为React提供Redux store</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8store%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">3.4.</span> <span class="toc-text">4. 组件使用store中的数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E7%BB%84%E4%BB%B6%E4%BF%AE%E6%94%B9store%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">3.5.</span> <span class="toc-text">5. 组件修改store中的数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E7%BB%84%E4%BB%B6%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E5%B9%B6%E4%BC%A0%E5%8F%82"><span class="toc-number">3.6.</span> <span class="toc-text">6. 组件修改数据并传参</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-Redux%E5%BC%82%E6%AD%A5%E5%A4%84%E7%90%86"><span class="toc-number">3.7.</span> <span class="toc-text">7. Redux异步处理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Todos%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B"><span class="toc-number">4.</span> <span class="toc-text">Todos综合案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-number">4.1.</span> <span class="toc-text">1. 准备开发环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%B8%B2%E6%9F%93%E5%88%97%E8%A1%A8"><span class="toc-number">4.2.</span> <span class="toc-text">2. 渲染列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%AE%9E%E7%8E%B0%E5%88%A0%E9%99%A4"><span class="toc-number">4.3.</span> <span class="toc-text">3. 实现删除</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%88%87%E6%8D%A2%E5%8D%95%E9%80%89%E7%8A%B6%E6%80%81"><span class="toc-number">4.4.</span> <span class="toc-text">4. 切换单选状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%88%87%E6%8D%A2%E5%85%A8%E9%80%89%E7%8A%B6%E6%80%81"><span class="toc-number">4.5.</span> <span class="toc-text">5. 切换全选状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%96%B0%E5%A2%9E%E5%AE%9E%E7%8E%B0"><span class="toc-number">4.6.</span> <span class="toc-text">6. 新增实现</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BE%8E%E5%9B%A2%E5%B0%8F%E6%A1%88%E4%BE%8B"><span class="toc-number">5.</span> <span class="toc-text">美团小案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E7%8E%AF%E5%A2%83"><span class="toc-number">5.1.</span> <span class="toc-text">1. 准备环境</span></a></li></ol></li></ol>
                                  </div>
                              </button>
                          
                          
                      
                    
                      <a href="#nexmoe-content" class="toc-link" aria-label="Back To Top" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
                  </div>
              </div>
            </div>
    </div>
    <div id="nexmoe-search-space">
	<div class="search-container">
		<div class="search-header">
			<div class="search-input-container">
				<input
					class="search-input"
					type="text"
					placeholder="搜索"
					oninput="sinput();"
				/>
			</div>
			<a class="search-close" onclick="sclose();">×</a>
		</div>
		<div class="search-body"></div>
	</div>
</div>

    
    
</body>

</html>
