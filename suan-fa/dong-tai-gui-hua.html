<!DOCTYPE html>

<html lang="zh-CN">

<head>
    
    <title>动态规划 - 折影轻梦</title>
    <meta charset="UTF-8">
    <meta name="keywords" content="折影轻梦,Mixcm,轻惋,觅漫者,小舒同学,Xiaoshu,Nexmoe,产品,Meteor,探索者小舒,伴学OS1,Theme,Design,Product">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
    <meta name="description" content="动态规划01动态规划解不同的子序列 LeetCode第115题 困难  给定一个字符串s和一个字符串t，计算在s的子序列中t出现的个数。 字符串的一个子序列是指，通过删除一些（也可以不删除）字符且不干扰剩余字符相对位置所组成的新字符串。（例如，”ACE”是”ABCDE”的一个子序列，而”AEC”不是） 题目数据保证答案符合32位带符号整数范围。 示例 1：  输入：s &#x3D; “rabbbi">
<meta property="og:type" content="article">
<meta property="og:title" content="动态规划">
<meta property="og:url" content="https://isunderachiever.github.io/suan-fa/dong-tai-gui-hua.html">
<meta property="og:site_name" content="折影轻梦">
<meta property="og:description" content="动态规划01动态规划解不同的子序列 LeetCode第115题 困难  给定一个字符串s和一个字符串t，计算在s的子序列中t出现的个数。 字符串的一个子序列是指，通过删除一些（也可以不删除）字符且不干扰剩余字符相对位置所组成的新字符串。（例如，”ACE”是”ABCDE”的一个子序列，而”AEC”不是） 题目数据保证答案符合32位带符号整数范围。 示例 1：  输入：s &#x3D; “rabbbi">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo02/202406022300168.png">
<meta property="article:published_time" content="2024-06-02T14:00:00.000Z">
<meta property="article:modified_time" content="2024-06-02T15:00:47.062Z">
<meta property="article:author" content="折影轻梦">
<meta property="article:tag" content="动态规划">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo02/202406022300168.png">
    
<link rel="stylesheet" href="/lib/fancybox/fancybox.css">
<link rel="stylesheet" href="/lib/mdui_043tiny/mdui.css">


    <link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1717340472177">
    
    <link rel="stylesheet" href="/css/style.css?v=1717340472177">

    
        
            <link rel="stylesheet" href="/custom.css?v=1717340472177">
        
    

    
<script src="/lib/mdui_043tiny/mdui.js" async></script>
<script src="/lib/fancybox/fancybox.umd.js" async></script>


    <script async src="/js/app.js?v=1717340472177"></script>
    
     

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4D4ZJ9G024"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag("js", new Date());

  gtag("config", "G-4D4ZJ9G024");
</script>

<meta name="generator" content="Hexo 6.3.0"></head>

<body class="mdui-drawer-body-left">
    <div id="nexmoe-background">
        <div class="nexmoe-bg" 
            style="background-image: url(https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102206.jpg)"
        ></div>
        <div class="mdui-appbar mdui-shadow-0">
            <div class="mdui-toolbar">
                <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
                <div class="mdui-toolbar-spacer"></div>
                <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
                <a href="/" title="折影轻梦" class="mdui-btn mdui-btn-icon"><img src="https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102017.jpg" alt="折影轻梦"></a>
            </div>
        </div>
    </div>
    <div id="nexmoe-header">
        <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="折影轻梦">
            <img src="https://raw.githubusercontent.com/IsUnderAchiever/blog-img/master/about/202309161102017.jpg" alt="折影轻梦" alt="折影轻梦">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>169</div>
        <div><span>标签</span>62</div>
        <div><span>分类</span>63</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/archive.html" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/life.html" title="我的生活">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的生活
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/about.html" title="关于博主">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博主
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
        
            
            <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
        
            <form id="search_form">
                <label><input class="st-default-search-input" id="search_value" name="q" type="search" placeholder="搜索" style="
                    font-size: 15px !important;
                    height: 56px !important;
                    background-image: none;
                "></label>
            </form>
         
    </div>
</div>


	<script async src="/js/search.js?v=1717340472177"></script>



        
            
            <div class="nexmoe-widget-wrap">
	<div class="nexmoe-widget nexmoe-social">
		<a
			class="mdui-ripple"
			href="https://github.com/IsUnderAchiever/"
			target="_blank"
			mdui-tooltip="{content: 'QQ群'}"
			style="
				color: rgb(249, 174, 8);
				background-color: rgba(249, 174, 8, .1);
			"
		>
			<i
				class="nexmoefont icon-QQ"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://space.bilibili.com/477448861/"
			target="_blank"
			mdui-tooltip="{content: '哔哩哔哩'}"
			style="
				color: rgb(231, 106, 141);
				background-color: rgba(231, 106, 141, .1);
			"
		>
			<i
				class="nexmoefont icon-bilibili"
			></i> </a
		>
	</div>
</div>

        
            
            
            
            
            
            
    </aside>
    <div class="nexmoe-copyright">
        &copy; 2024 折影轻梦
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        
    </div>
</div><!-- .nexmoe-drawer -->
    </div>
    <div id="nexmoe-content">
        <div class="nexmoe-primary">
    <div class="nexmoe-post">
  <article>
    
        <div class="nexmoe-post-cover absolute" style="padding-top: NaN%;"> 
            <img src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/wallpaper/1dec02fa-d3be-11ed-a7a8-b068e67533b2.jpg" alt="动态规划" loading="lazy">
            <h1>动态规划</h1>
        </div>
    
    
    <div class="nexmoe-post-meta">
    <div class="nexmoe-rainbow">
        <a class="nexmoefont icon-calendar-fill">2024年06月02日</a>
        
            <a class="nexmoefont icon-appstore-fill -link" href="/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">动态规划</a>
        
        
    </div>
    
    
    
    
    
</div>

    <h1 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h1><h2 id="01动态规划解不同的子序列"><a href="#01动态规划解不同的子序列" class="headerlink" title="01动态规划解不同的子序列"></a>01动态规划解不同的子序列</h2><blockquote>
<p>LeetCode第115题</p>
<p>困难</p>
</blockquote>
<p><code>给定一个字符串s和一个字符串t，计算在s的子序列中t出现的个数。</code></p>
<p>字符串的一个子序列是指，通过删除一些（也可以不删除）字符且不干扰剩余字符相对位置所组成的新字符串。（例如，”ACE”是”ABCDE”的一个子序列，而”AEC”不是）</p>
<p>题目数据保证答案符合32位带符号整数范围。</p>
<p><strong>示例 1：</strong></p>
<blockquote>
<p><strong>输入</strong>：s &#x3D; “rabbbit”, t &#x3D; “rabbit”</p>
<p><strong>输出</strong>：3</p>
<p><strong>解释</strong>：</p>
<p>如下图所示, 有3种可以从s中得到”rabbit”的方案。</p>
<p><code>rabb</code>b<code>it</code><br><code>rab</code>b<code>bit</code><br><code>ra</code>b<code>bbit</code></p>
</blockquote>
<p><strong>示例 2：</strong></p>
<blockquote>
<p><strong>输入</strong>：s &#x3D; “ babgbag”, t &#x3D; “ bag”</p>
<p><strong>输出</strong>：5</p>
<p><strong>解释</strong>：</p>
<p>如下图所示, 有5种可以从s中得到”bag”的方案。</p>
<p><code>ba</code>b<code>g</code>bag<br><code>ba</code>bgba<code>g</code><br><code>b</code>abgb<code>ag</code><br>ba<code>b</code>gb<code>ag</code><br>babg<code>bag</code></p>
</blockquote>
<p><strong>提示：</strong></p>
<ul>
<li>0&lt;&#x3D;s.length , t.length&lt;&#x3D;1000</li>
<li>s和t由英文字母组成</li>
</ul>
<blockquote>
<p>思路如下</p>
</blockquote>
<p>我们需要知道字符串s的所有子序列中，和字符串t相同的有多少个</p>
<p>我们定义<code>dp[i][j]</code>表示字符串t的前<code>i</code>个字符可以由字符串s的前<code>j</code>个字符组成的个数</p>
<p>也就是字符串s的前<code>j</code>个字符组成的子序列中，有<code>dp[i][j]</code>个子序列与t的前<code>i</code>个字符相同</p>
<p>那么我们需要求的是**<code>dp[t.length()][s.length()]</code>**</p>
<p>如果<code>字符串t的第i个字符</code>和<code>字符串s的第j个字符</code><strong>一样</strong></p>
<p>此时我们有两种选择</p>
<ol>
<li>使用<code>字符串s的第j个字符</code>与<code>字符串t的第i个字符</code>匹配<ul>
<li>那么此时我们可以将<code>dp[i][j]</code>转化成<code>dp[i-1][j-1]</code></li>
</ul>
</li>
<li>不使用<code>字符串s的第j个字符</code>与<code>字符串t的第i个字符</code>匹配<ul>
<li>那么此时我们可以将<code>dp[i][j]</code>转化成<code>dp[i][j-1]</code></li>
</ul>
</li>
</ol>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://raw.githubusercontent.com/IsUnderAchiever/markdown-img/master/PicGo02/202406022300168.png" alt="image-20240602221242816" data-caption="image-20240602221242816" loading="lazy"></p>
<p>上述是<code>字符串t的第i个字符</code>和<code>字符串s的第j个字符</code><strong>一样</strong>的情况</p>
<p>如果<code>字符串t的第i个字符</code>和<code>字符串s的第j个字符</code><strong>不一样</strong></p>
<p>就是说字符串s的第j个字符不能匹配字符串t的第i个字符。</p>
<p>那么我们只能计算字符串s的前<code>j -1</code>个字符构成的子序列中包含字符串t的前<code>i</code>个字符组成的字符串的个数。</p>
<p>即<code>dp[i][j-1]</code></p>
<p>所以<code>递推公式</code>如下</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= sLength; j++) &#123;<br>    <span class="hljs-keyword">if</span> (t.charAt(i - <span class="hljs-number">1</span>) == s.charAt(j - <span class="hljs-number">1</span>)) &#123;<br>        <span class="hljs-comment">//如果字符串t的第i个字符和s的第j个字符一样，</span><br>        <span class="hljs-comment">//那么有两种选择</span><br>        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + dp[i][j - <span class="hljs-number">1</span>];<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">//如果字符串t的第i个字符和s的第j个字符不一样，</span><br>        <span class="hljs-comment">//我们只能用字符串s的前j-1个字符来计算他包含的数量</span><br>        dp[i][j] = dp[i][j - <span class="hljs-number">1</span>];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>动态规划的三个步骤就是<code>定义状态</code>，<code>列出递推公式</code>，<code>找出边界条件</code>。前面两步我们都完成了，我们来看最后一个。</p>
<p>因为空字符串<code>&quot;&quot;</code>是所有字符串的子集，所以当字符串t为空的时候，<code>dp[0][j]</code>&#x3D;1;</p>
<p>最终代码如下</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">_01_Subsequence</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">answer</span><span class="hljs-params">(String str, String targetStr)</span> &#123;<br>        <span class="hljs-comment">// sLength和tLength分别是两个字符串的长度</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">sLength</span> <span class="hljs-operator">=</span> str.length();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">tLength</span> <span class="hljs-operator">=</span> targetStr.length();<br>        <span class="hljs-comment">// 定义dp</span><br>        <span class="hljs-type">int</span>[][] dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[tLength + <span class="hljs-number">1</span>][sLength + <span class="hljs-number">1</span>];<br><br>        <span class="hljs-comment">// 边界条件</span><br>        <span class="hljs-comment">// 初始化dp</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt;= sLength; j++) &#123;<br>            dp[<span class="hljs-number">0</span>][j] = <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= tLength; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= sLength; j++) &#123;<br>                <span class="hljs-comment">//下面是递推公式</span><br>                <span class="hljs-keyword">if</span> (targetStr.charAt(i - <span class="hljs-number">1</span>) == str.charAt(j - <span class="hljs-number">1</span>)) &#123;<br>                    <span class="hljs-comment">//如果字符串t的第i个字符和s的第j个字符一样，</span><br>                    <span class="hljs-comment">//那么有两种选择</span><br>                    dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + dp[i][j - <span class="hljs-number">1</span>];<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-comment">//如果字符串t的第i个字符和s的第j个字符不一样，</span><br>                    <span class="hljs-comment">//我们只能用字符串s的前j-1个字符来计算他包含的数量</span><br>                    dp[i][j] = dp[i][j - <span class="hljs-number">1</span>];<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> dp[tLength][sLength];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>思考以下几个问题</p>
</blockquote>
<ol>
<li>为什么dp定义是<code>new int[tLength + 1][sLength + 1]</code>而不是<code>new int[tLength][sLength]</code>？</li>
<li>递推公式先遍历<code>tLength</code>，后遍历<code>sLength</code>，反过来可不可以？</li>
</ol>
<blockquote>
<p>解答上述问题</p>
</blockquote>
<ol>
<li><p>假如传入的s、t分别为<code>rabbbit</code>和<code>rabbit</code>，那么sLength为7，tLength 为6，我们定义的dp为<code>dp[7][8]</code></p>
<p>需要求解的<code>dp</code>是<code>dp[6][7]</code>为什么会出现这种情况呢？</p>
<p>在后文的<code>dp</code>初始化代码中会初始化dp</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt;= sLength; j++) &#123;<br>    dp[<span class="hljs-number">0</span>][j] = <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>如果dp声明为<code>int[][] dp = new int[tLength][sLength];</code>那么后文初始化则会<code>数组越界</code></p>
<p>声明<code>int[][] dp = new int[7][8];</code>，那么可以从<code>dp[0][0]</code>取到<code>dp[6][7]</code>，取<code>dp[7][8]</code>则会越界</p>
</li>
<li><p>先遍历<code>sLength</code>，后遍历<code>tLength</code>也可以</p>
</li>
</ol>

    
  </article>

  
      
    <div class="nexmoe-post-copyright">
        <strong>本文作者：</strong>折影轻梦<br>
        <strong>本文链接：</strong><a href="https://isunderachiever.github.io/suan-fa/dong-tai-gui-hua.html" title="https:&#x2F;&#x2F;isunderachiever.github.io&#x2F;suan-fa&#x2F;dong-tai-gui-hua.html" target="_blank" rel="noopener">https:&#x2F;&#x2F;isunderachiever.github.io&#x2F;suan-fa&#x2F;dong-tai-gui-hua.html</a><br>
        
            <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可

        
    </div>


  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
   
    
        <a class="nexmoefont icon-tag-fill -none-link" href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" rel="tag">动态规划</a>
    
</div>
  
  

  
      <div class="nexmoe-post-footer">
          <script src="https://giscus.app/client.js"
    data-repo="nexmoe/nexmoe.com"
    data-repo-id="R_kgDOJI1XUA"
    data-category="General"
    data-category-id="DIC_kwDOJI1XUM4CU1nn"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="preferred_color_scheme"
    data-lang="en"
    data-loading="lazy"
    crossorigin="anonymous"
    async>
</script>

      </div>
  
</div>
</div>
        <div class="nexmoe-post-right">
              <div class="nexmoe-fixed">
                  <div class="nexmoe-tool"> 
                    
                      
                        
                          
                          
                              <button class="mdui-fab catalog" style="overflow:unset;">
                                  <i class="nexmoefont icon-i-catalog"></i>
                                  <div class="nexmoe-toc">
                                      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92"><span class="toc-number">1.</span> <span class="toc-text">动态规划</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#01%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E8%A7%A3%E4%B8%8D%E5%90%8C%E7%9A%84%E5%AD%90%E5%BA%8F%E5%88%97"><span class="toc-number">1.1.</span> <span class="toc-text">01动态规划解不同的子序列</span></a></li></ol></li></ol>
                                  </div>
                              </button>
                          
                          
                      
                    
                      <a href="#nexmoe-content" class="toc-link" aria-label="Back To Top" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
                  </div>
              </div>
            </div>
    </div>
    <div id="nexmoe-search-space">
	<div class="search-container">
		<div class="search-header">
			<div class="search-input-container">
				<input
					class="search-input"
					type="text"
					placeholder="搜索"
					oninput="sinput();"
				/>
			</div>
			<a class="search-close" onclick="sclose();">×</a>
		</div>
		<div class="search-body"></div>
	</div>
</div>

    
    
</body>

</html>
